<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://www.thomaslevine.com/</id>
  <title>Thomas Levine</title>
  <updated>2014-01-16T00:00:00Z</updated>
  <link rel="alternate" href="http://www.thomaslevine.com/"/>
  <link rel="self" href="http://www.thomaslevine.com/!/feed.xml"/>
  <author>
    <name>Thomas Levine</name>
    <uri>http://www.thomaslevine.com</uri>
  </author>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-16:/!/data-catalog-dead-links/index.html</id>
    <title type="html">Dead links on data catalogs</title>
    <published>2014-01-16T00:00:00Z</published>
    <updated>2014-01-16T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/data-catalog-dead-links/index.html"/>
    <content type="html">&lt;p&gt;It goes without saying that websites usually shouldn’t have dead links, but
here are a bunch of fancy reasons why dead links are bad on open data sites.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href="http://sunlightfoundation.com/opendataguidelines/#permanent-access"&gt;Sunlight Foundation&lt;/a&gt;
  says to “Create permanent, lasting access to data”.&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://project-open-data.github.io/principles/"&gt;Project Open Data&lt;/a&gt; says
  that data should be “Managed Post-Release”.&lt;/li&gt;
  &lt;li&gt;The &lt;a href="http://census.okfn.org/faq/#what-do-all-the-questions-about-the-datasets-mean-"&gt;questions&lt;/a&gt;
  for Open Knowledge Foundation’s Open Data Census include
    &lt;ul&gt;
      &lt;li&gt;“Is the data available online?”&lt;/li&gt;
      &lt;li&gt;“URL of data online?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;The Open Data Institute
  &lt;a href="https://certificates.theodi.org/surveys/gb/ofm6KhncVg/take"&gt;Open Data Certificate questionnaire&lt;/a&gt;
  asks for a bunch of URLs about the dataset to be certified;
  I presume they should be alive.
  It also asks “How long will this data be available for?”&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In summary, dead links are bad.&lt;/p&gt;

&lt;p&gt;That said, if the alternative to having a dead link to a dataset is having no
link to a dataset, I’d say it’s better to have the dead link so we know that the
data exist. But live links are better; let’s move on.&lt;/p&gt;

&lt;p&gt;As I started looking at data on &lt;a href="http://ckan.org/"&gt;CKAN&lt;/a&gt; sites, I noticed that a lot of the
datasets were links to files on other websites and that a lot of these links
were dead. Then I started wondering how many and which ones.&lt;/p&gt;

&lt;h2 id="acquiring-the-data"&gt;Acquiring the data&lt;/h2&gt;
&lt;p&gt;I collected data about dead links from CKAN and
&lt;a href="http://www.socrata.com/open-data-portal/"&gt;Socrata&lt;/a&gt; catalogs;
it went a bit like this.&lt;/p&gt;

&lt;p&gt;&lt;img src="data-collection.png" alt="Diagram of the data collection process" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The next few sections explain this a bit more.&lt;/p&gt;

&lt;h3 id="accessing-data-catalogs"&gt;Accessing data catalogs&lt;/h3&gt;
&lt;p&gt;I downloaded &lt;a href="https://opendata.socrata.com/api/views/6wk3-4ija/rows.json?accessType=DOWNLOAD"&gt;a list of Socrata catalogs&lt;/a&gt;
(&lt;a href="https://github.com/tlevine/open-data/blob/master/opendata.socrata.com/api/views/6wk3-4ija/rows.json%3FaccessType%3DDOWNLOAD"&gt;mirror&lt;/a&gt;)
and &lt;a href="http://instances.ckan.org/config/instances.json"&gt;a list of CKAN catalogs&lt;/a&gt;
(&lt;a href="https://github.com/tlevine/open-data/blob/master/instances.ckan.org/config/instances.json"&gt;mirror&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I tried querying the APIs for all of these sites.
I couldn’t do this for some of the sites, mainly because they required
authorization (lolz open data) that I did not have or because
the URL I found for the catalog did not correspond with the
domain for the CKAN or Socrata API.
I continued with all of the sites for which I could get the data;
this wound up being
44 CKAN catalogs and
52 Socrata catalogs.&lt;/p&gt;

&lt;h3 id="dataset-metadata"&gt;Dataset metadata&lt;/h3&gt;
&lt;p&gt;With each of these catalogs, I acquired the metadata JSON file for each dataset
in the catalog. Here they are for
&lt;a href="https://github.com/tlevine/socrata-views"&gt;Socrata&lt;/a&gt; and for
&lt;a href="https://github.com/tlevine/ckan-datasets"&gt;CKAN&lt;/a&gt;. These are also
&lt;a href="https://github.com/tlevine/open-data/tree/master/downloads"&gt;submodules&lt;/a&gt;
to the &lt;a href="https://github.com/tlevine/open-data/tree/master"&gt;main repository&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id="link-liveliness"&gt;Link liveliness&lt;/h3&gt;
&lt;p&gt;From the metadata for each dataset, I pulled out the
URL
for the dataset if there was a URL.
Here’s the code
for &lt;a href="https://github.com/tlevine/open-data/blob/master/links.py#L13"&gt;Socrata&lt;/a&gt; and
for &lt;a href="https://github.com/tlevine/open-data/blob/master/links.py#L32"&gt;CKAN&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I checked whether datasets were alive by trying to download them.
(&lt;a href="https://github.com/tlevine/open-data/blob/master/links.py#L37"&gt;More precisely&lt;/a&gt;,
I really issued a HEAD request and checked the status code.)&lt;/p&gt;

&lt;h3 id="internal-versus-external-storage"&gt;Internal versus external storage&lt;/h3&gt;
&lt;p&gt;Once I had the metadata files about each dataset, I also
&lt;a href="https://github.com/tlevine/open-data/blob/master/links.py"&gt;determined&lt;/a&gt;
whether the dataset was stored &lt;em&gt;internally&lt;/em&gt; or &lt;em&gt;externally&lt;/em&gt;.
These are terms that I just invented, so I define them below.&lt;/p&gt;

&lt;p&gt;With &lt;strong&gt;internal storage&lt;/strong&gt;, the dataset is uploaded to the data catalog software
itself. In CKAN, the dataset gets stored in the FileStore, and in Socrata,
the dataset gets stored in Socrata’s data storage. (There isn’t really a
name for this place in Socrata’s architecture, as far as I know.)&lt;/p&gt;

&lt;p&gt;With &lt;strong&gt;external storage&lt;/strong&gt;, the dataset is a file that is stored on some other
website on the internet, and we can reference the dataset with a URL. When we
add the dataset to CKAN or Socrata, we are just linking to this other website.&lt;/p&gt;

&lt;p&gt;As I imply above, Socrata and CKAN both support both of these two approaches.&lt;/p&gt;

&lt;h3 id="final-database"&gt;Final database&lt;/h3&gt;
&lt;p&gt;I combined this all into the same
&lt;a href="http://bigdada.thomaslevine.com/open-data.sqlite.gz"&gt;SQLite3 file&lt;/a&gt;
as I used for the &lt;a href="/!/socrata-products"&gt;Socrata products analysis&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="results"&gt;Results&lt;/h2&gt;

&lt;h3 id="how-many-data-catalogs-have-external-links"&gt;How many data catalogs have external links?&lt;/h3&gt;
&lt;p&gt;As I mention above, there are
52 Socrata catalogs.
Of these,
19
(37%)
have at least one externally stored dataset.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/has_links_socrata.png" alt="Socrata catalogs with externally stored datasets" /&gt; &lt;/p&gt;

&lt;p&gt;Of the 44 CKAN catalogs,
43
(98%)
have at least one externally stored dataset.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/has_links.png" alt="Proportion of data catalogs with externally stored datasets" /&gt; &lt;/p&gt;

&lt;p&gt;That’s a big difference.&lt;/p&gt;

&lt;h3 id="link-types-and-liveliness-by-catalog"&gt;Link types and liveliness by catalog&lt;/h3&gt;
&lt;p&gt;Rather than looking at just whether there are any externally stored datasets at all,
let’s now look at what proportion of the datasets are stored externally.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/software_all_types.png" alt="Non-links, live links, and dead links across data catalog" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Whether a dataset is stored internally or externally is related to whether it
stays alive. This is a plot of what proportion of datasets on Socrata are stored
internally and what proportion of datasets are alive; each dot is a data catalog
run by Socrata.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/prop_links_socrata.png" alt="Only externally stored data can be dead" /&gt; &lt;/p&gt;

&lt;p&gt;Socrata data catalogs with more externally stored data tend to have more dead links.&lt;/p&gt;

&lt;p&gt;The above plot was for just Socrata; let’s see what happens when we add CKAN.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/prop_links.png" alt="CKAN catalogs have more externally stored datasets and more dead datasets" /&gt; &lt;/p&gt;

&lt;p&gt;CKAN catalogs tend to have more externally stored data. When we add CKAN, the
association between externally stored data and dead links continues.&lt;/p&gt;

&lt;h3 id="liveliness-among-externally-stored-data"&gt;Liveliness among externally stored data&lt;/h3&gt;
&lt;p&gt;Here’s another way of seeing the above relationship. Let’s look at only the externally
stored datasets, and check what proportion of those are alive.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/software_only_links.png" alt="Of only the external links, what proportion of datasets are alive?" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Catalogs with no external links appear as empty bars.&lt;/em&gt; This is ambiguous,
because empty bars could also mean that there are external links but they’re
all dead. Oh, well.&lt;/p&gt;

&lt;p&gt;Some data catalogs are better than others, but about a quarter of externally stored
datasets tend to be dead. Thus, when we make more externally stored datasets,
we should expect more dead datasets.&lt;/p&gt;

&lt;p&gt;Possibly interesting: the catalogs in this plot are ordered the same way they
are in the &lt;a href="#link-types-and-liveliness-by-catalog"&gt;earlier similar-looking plot&lt;/a&gt;,
so higher catalogs
are ones with fewer dead links.&lt;/p&gt;

&lt;h2 id="software-suggests-behavior"&gt;Software suggests behavior&lt;/h2&gt;
&lt;p&gt;While both softwares support both storage methods, Socrata encourages the
use of internal storage, and CKAN encourages the use of external storage.
Let’s walk through how you create a dataset in both CKAN and Socrata through
their respective web interfaces.&lt;/p&gt;

&lt;h3 id="ckan"&gt;CKAN&lt;/h3&gt;
&lt;p&gt;In CKAN, this is the screen you get when you are specifying the data file
for your dataset.&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-1.png" alt="&amp;quot;1. Create dataset&amp;quot; page" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The first screen says nothing about how to enter the data, but the second one does.&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-2.png" alt="&amp;quot;2. Additional Data&amp;quot; page" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;You enter the URL of a file or an API,&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-3.png" alt="Filling in the &amp;quot;Resource&amp;quot; field with a &amp;quot;Link to an API&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;or you upload a file.&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-4.png" alt="The &amp;quot;File Upload&amp;quot; file picker window" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;After you upload the file, the box gets populated with the URL to which that
has been uploaded. (This URL is inside the CKAN FileStore.)&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-5.png" alt="Filling in the &amp;quot;Resource&amp;quot; field with a &amp;quot;Upload a file&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The first two cases lead to external storage, and
the third case leads to internal storage.
CKAN does fancy things depending on whether you say it’s a file or an API
and depending on the file format you tell it, but that’s separate from the
issue of internal versus external storage.&lt;/p&gt;

&lt;p&gt;As you might notice above, CKAN subtly encourages you to store things externally.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;There are two options for external storage but just one for internal.&lt;/li&gt;
  &lt;li&gt;The two tabs for external storage options come before the third tab for
 internal storage.&lt;/li&gt;
  &lt;li&gt;In the web interface, internally stored, uploaded files are treated like
 external links.&lt;/li&gt;
  &lt;li&gt;One of the external storage options (the “Link to a file” tab) is selected
 by default when you arrive at the page.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;CKAN is a bit subtle in encouraging external storage, but do keep this in mind.&lt;/p&gt;

&lt;h3 id="socrata"&gt;Socrata&lt;/h3&gt;
&lt;p&gt;While externally stored data exist on Socrata, I didn’t find any way of creating
such a dataset with the Socrata website. Here’s what creating a new dataset on 
Socrata looks like.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-start.png" alt="&amp;quot;How would you like to create your new Dataset?&amp;quot; page, with three options: &amp;quot;Design from Scratch&amp;quot;, &amp;quot;Import a Data File&amp;quot; and &amp;quot;Upload a Non-Data File&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;If you choose to “Design from Scratch”, you wind up entering the data through
the table interface in Socrata; after you click through a few screens, you get
an editor like this.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-scratch-2.png" alt="A spreadsheet-like table editor in Socrata Open Data Portal software" /&gt;&lt;/p&gt;

&lt;p&gt;If you choose to “Import a Data File”, you see this.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-1.png" alt="&amp;quot;Where is the file located&amp;quot; page, with two options: &amp;quot;On my computer&amp;quot; and &amp;quot;On the internet&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Because I was looking for a place to add externally stored data, I clicked on
“On the Internet”. I entered a file into this box, and the file got downloaded
to Socrata.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-2.png" alt="&amp;quot;Please indicate where your data file lives.&amp;quot;, with a text input box containing the URL &amp;quot;http://chainsaw.thomaslevine.com/aurora.csv&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Then I got this schema editor,&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-3.png" alt="Display of column names and types for the uploaded dataset, with buttons for editing the information" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;and the data got imported to the internal storage.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-5.png" alt="The same spreadsheet-like editor as above, but with the aurora.csv data" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The non-data file approach also leads to internal storage.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-non-data.png" alt="&amp;quot;Please choose a file to upload&amp;quot; page that looks nearly identical to the &amp;quot;Where is the file located&amp;quot; page" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;I don’t even see any documentation as to how to do this
&lt;a href="http://dev.socrata.com/publishers/importing"&gt;with the API&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Socrata Support did send me an
&lt;a href="https://twitter.com/SocrataSupport/status/423600872501690368"&gt;answer&lt;/a&gt;,
but I need to log in to ZenDesk to do that (lolz open data again),
and I was having trouble doing that.&lt;/p&gt;

&lt;p&gt;So it’s pretty hard to add an externally stored dataset to Socrata.&lt;/p&gt;

&lt;h2 id="internal-storage-encourages-live-links"&gt;Internal storage encourages live links&lt;/h2&gt;
&lt;p&gt;If your data are stored in CKAN’s FileStore or in Socrata’s
data storage (rather than as an external link), then it is
practically impossible for the link to be dead.&lt;/p&gt;

&lt;p&gt;If we want to use fancy design-speak, we can call this a forcing function.
A forcing function is an aspect in the design of a thing that makes it
impossible for people to do something that they aren’t supposed to do.
If we make it impossible for links to be dead, they won’t ever be dead.&lt;/p&gt;

&lt;h2 id="other-ways-of-encouraging-live-links"&gt;Other ways of encouraging live links&lt;/h2&gt;
&lt;p&gt;Removing the external link feature should reduce the number of dead links
to zero, and that might be nice. On the other hand, there might be some good
things about external links, so maybe we can instead come up with some other
software feature that helps people avoid or fix dead links. For example,
perhaps there could be a page that lists the dead datasets and counts how
many times people have tried accessing them.&lt;/p&gt;

&lt;p&gt;The &lt;a href="https://github.com/okfn/ckanext-qa"&gt;CKAN Quality Assurance Extension&lt;/a&gt;
does just this; here’s one of its reports.&lt;/p&gt;

&lt;p&gt;&lt;a href="http://data.gov.uk/data/reports/qa/organisation/broken_resource_links/her-majestys-revenue-and-customs"&gt;&lt;img src="ckanext-qa.png" alt="A table of datasets with statistics about how dead they are" class="wide" /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id="why-measure-data-catalogs"&gt;Why measure data catalogs&lt;/h2&gt;
&lt;p&gt;Detecting dead links is one of several things that we can easily do to
measure the quality of a data catalog. Similarly, we can also measure
&lt;a href="/!/open-data-licensing"&gt;what licenses are used&lt;/a&gt;,
&lt;a href="/!/data-updatedness"&gt;how up-to-date the data are&lt;/a&gt;,
and &lt;a href="/!/socrata-formats"&gt;what data formats the data are in&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When we have lots of datasets on our data catalog, it becomes too much
for someone to read through all of them. Measures like these help us get
some idea of what is going on across the data catalog. They also help us
choose where to focus our attention, so that we may identify good
practices and diagnose problems.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-09:/!/nyc-crime-map/index.html</id>
    <title type="html">NYC Crime Map Data API</title>
    <published>2014-01-09T00:00:00Z</published>
    <updated>2014-01-09T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/nyc-crime-map/index.html"/>
    <content type="html">&lt;p&gt;People have been complaining a lot about how you can’t get the raw data out of this
&lt;a href="http://maps.nyc.gov/crime/"&gt;NYC Crime Map&lt;/a&gt;. I don’t know what they’re talking about.
Here are the data, as two geojson files.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href="http://chainsaw.thomaslevine.com/nyc-crime-data/02378420399528461352-17772055697785505571.geojson"&gt;Separated by crime type&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://chainsaw.thomaslevine.com/nyc-crime-data/02378420399528461352-11853667273131550346.geojson"&gt;Totals across crime types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Read on to see how I got these files.&lt;/p&gt;

&lt;h2 id="api-for-the-data"&gt;API for the data&lt;/h2&gt;
&lt;p&gt;Go to the crime map, and look at the network requests that are being made.
You’ll see a bunch of calls to the Google Maps Engine API.&lt;/p&gt;

&lt;p&gt;&lt;img src="firefox.png" alt="A network request in the console in Firefox" /&gt;&lt;/p&gt;

&lt;p&gt;Look at one of them, and you’ll see the exact query that is being made.&lt;/p&gt;

&lt;p&gt;&lt;img src="request-window.png" alt="A window with more information about the request" /&gt;&lt;/p&gt;

&lt;p&gt;It’s calling the
&lt;a href="https://developers.google.com/maps-engine/documentation/reference/v1/tables/features"&gt;Tables.features&lt;/a&gt;
endpoint of the Google Maps Engine API.&lt;/p&gt;

&lt;p&gt;Here’s the function I wrote for calling that endpoint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def table_features(table_id, select, where = None, maxResults = 1000, pageToken = None):
    url = 'https://www.googleapis.com/mapsengine/v1/tables/%s/features/' % table_id

    params = {
        'key': KEY,
        'version': 'published',
        'maxResults': maxResults,
        'select': select,
    }
    if where:
        params['where'] = where
    if pageToken:
        params['pageToken'] = pageToken

    headers = {
        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Firefox/24.0',
        'Referer':  'http://maps.nyc.gov/crime/',
    }

    r = requests.get(url, headers = headers, params = params)
    return r
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="two-tables"&gt;Two tables&lt;/h2&gt;
&lt;p&gt;The data are stored in two tables.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;02378420399528461352-11853667273131550346&lt;/li&gt;
  &lt;li&gt;02378420399528461352-17772055697785505571&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The latter of these tables contains a “CR” field for the crime type;
the former does not. I presume that the former has one row per location
and that the latter has one row per crime type per location,
but I haven’t checked.&lt;/p&gt;

&lt;h2 id="table-schema"&gt;Table schema&lt;/h2&gt;
&lt;p&gt;You can supposedly get the table schema with the
&lt;a href="https://developers.google.com/maps-engine/documentation/reference/v1/tables/get"&gt;Tables&lt;/a&gt;
endpoint, but the &lt;code&gt;key&lt;/code&gt; doesn’t seem to give us access to that.
Here’s the function I wrote to call the Tables endpoint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def table(table_id):
    '''
    This would tell us the schema, among other things.
    https://developers.google.com/maps-engine/documentation/reference/v1/tables#resource
    '''

    url = 'https://www.googleapis.com/mapsengine/v1/tables/%s/' % table_id
    params = {
        'key': KEY,
    }
    headers = {
        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Firefox/24.0',
        'Referer':  'http://maps.nyc.gov/crime/',
    }
    r = requests.get(url, headers = headers, params = params)
    return r
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now I try to run it.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import crime
r = crime.table('02378420399528461352-17772055697785505571')
print(r.text)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And here’s the result.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can see some of the columns in the crime map JavaScript code, but there
might be columns in the table that aren’t exposed in the crime map website.&lt;/p&gt;

&lt;h2 id="getting-the-data-as-geojson"&gt;Getting the data as GeoJSON&lt;/h2&gt;
&lt;p&gt;I downloaded the full tables from the Google Maps Engine API,
so now you can download them as ordinary GeoJSON files, one per table.
Read more &lt;a href="https://github.com/tlevine/nyc-crime-map"&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="more-seriously"&gt;More seriously&lt;/h2&gt;
&lt;p&gt;While everyone has permission to download these data, I do know that getting
them seems impossible to some people. It’s funny, though, that it has taken
me so long to do something so simple.&lt;/p&gt;

&lt;p&gt;It usually takes quite a lot to convince me that something might be vaguely
useful. People complained a bunch about this map, so I finally got the
data into a nicer form, but I’m still skeptical that it’s really useful at all.&lt;/p&gt;

&lt;p&gt;So please convince me that I didn’t just waste two hours.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-01:/!/making-your-personal-website/index.html</id>
    <title type="html">How to make a personal website, in 9001 easy steps</title>
    <published>2014-01-01T00:00:00Z</published>
    <updated>2014-01-01T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/making-your-personal-website/index.html"/>
    <content type="html">&lt;p&gt;Making your own personal website might seem daunting, but
it’s not hard if you break it into smaller steps.&lt;/p&gt;

&lt;h2 id="recording-your-works"&gt;Recording your works&lt;/h2&gt;
&lt;p&gt;Start recording everything worth recording. Write
it down, take video, or whatever. It doesn’t matter how
you do it or how you organize things; just record things
while you still remember them, and store them in a place
you won’t lose them. (Email attachments are perfectly
acceptable.)&lt;/p&gt;

&lt;p&gt;Before I had a good system, I stored things in email
attachments, Google Docs, hard drives, Gitorious (git
repositories), Tumblr, SmugMug, S3, Twitter, Facebook,
a CouchDB, and in a 60-page book written in LaTeX.
I probably used other places too.&lt;/p&gt;

&lt;p&gt;&lt;small&gt;Fun fact: I named my 60-page book &lt;em&gt;The Dump&lt;/em&gt;, after
Maurice Benayoun’s &lt;a href="http://www.the-dump.net/"&gt;The Dump&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;The main thing is to get everything digital so that you can
carry the stuff around and search through it easily.&lt;/p&gt;

&lt;h2 id="write-about-your-stuff"&gt;Write about your stuff&lt;/h2&gt;
&lt;p&gt;You probably want to write a little something about each thing.
At the very least, you probably want to give them a title.
A paragraph and a date might be good too.&lt;/p&gt;

&lt;p&gt;I wrote these descriptions all over the place, but a lot were
as captions on SmugMug. This was sort of a good idea, but only
because I was uploading lots of pictures to SmugMug. The point
is that you don’t need to have a fancy website before you can
create content for the website.&lt;/p&gt;

&lt;p&gt;Also, &lt;strong&gt;don’t proofread&lt;/strong&gt;. Well, more accurately, only proofread
after you’ve posted something on the internet and a few hundred
people have read it and complimented you on it. Nobody is ever
going to see most of your stuff, so don’t waste time on making
it good.&lt;/p&gt;

&lt;h2 id="organizing-your-works"&gt;Organizing your works&lt;/h2&gt;
&lt;p&gt;Nobody other than you is going to read your website once
you have it, at least at first, so don’t worry about
designing it for other people. In fact, you don’t even need
a website; just come up with some system that makes it
easy for you to find the things you’ve recorded. I’ll
divide my approach to this into two categories.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Making a list&lt;/li&gt;
  &lt;li&gt;Organizing files into a standard structure&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id="make-a-list"&gt;Make a list&lt;/h3&gt;
&lt;p&gt;If you’ve been using email attachments to store your works,
you could just list the names of the works and search terms
that will find them. I actually didn’t do this, but the point
is that it doesn’t have to be fancy.&lt;/p&gt;

&lt;p&gt;I had already been doing this to some degree as I was recording
things in my 60-page LaTeX book and in my SmugMug galleries.&lt;/p&gt;

&lt;p&gt;Most of everything else was already publically accessible on the web,
so I mostly made a list of all of the links to them. I did this
as a &lt;a href="https://github.com/tlevine/www.thomaslevine.com/blob/c1e1302b2fe43bbe98902a08367bb4d01feea66e/content/index.html"&gt;webpage&lt;/a&gt;,
but you could do it in an email or blog post or whatever.&lt;/p&gt;

&lt;h3 id="make-a-consistent-file-structure"&gt;Make a consistent file structure&lt;/h3&gt;
&lt;p&gt;For anything you have been storing as ordinary files, copy the
files into a new place with standard naming conventions.
I suggest the following structure.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;things-i-did/name-of-thing/file-about-thing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For example,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;things-i-did/middle-names/askcensus.eml
things-i-did/middle-names/cornell_middle_names_by_school.png
things-i-did/middle-names/us_middle_names_over_time_by_state.pdf
things-i-did/middle-names/us_middle_names_over_time.png
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Don’t worry yet about writing the web page about it.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/tlevine/thomaslevine.com/tree/master/hack/blog"&gt;Here&lt;/a&gt;’s
me putting the things into directories before I was using my current
website-generator system.&lt;/p&gt;

&lt;h2 id="make-a-simple-website"&gt;Make a simple website&lt;/h2&gt;
&lt;p&gt;You wanted a website, so start putting stuff up on the web
in whatever way is easy.&lt;/p&gt;

&lt;p&gt;I wound up with a list of links before I had nicely
structured files, so I just put that up. It went through
many incarnations, but here are a few.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A bunch of files that I edited manually&lt;/li&gt;
  &lt;li&gt;SmugMug photo gallery thing&lt;/li&gt;
  &lt;li&gt;More files that I edited manually&lt;/li&gt;
  &lt;li&gt;Pages generated from that 60-page LaTeX book with
  &lt;a href="http://hevea.inria.fr/"&gt;HeVeA&lt;/a&gt; and a hacky shell script&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you have nicely structured files and no other list, you
could just dump them on a plain Apache web server,
like &lt;a href="http://chainsaw.thomaslevine.com/"&gt;this&lt;/a&gt;.
I suspect there’s even some fancy easy-to-use
drag-files-somewhere-and-have-them-magically-served thing.&lt;/p&gt;

&lt;p&gt;I got this idea while talking with
&lt;a href="http://cooperation.io/"&gt;Marina&lt;/a&gt;.
Her site is a bunch of files served by a
&lt;a href="https://gist.github.com/mk30/8210642"&gt;wonderfully sloppy script&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="make-a-fancy-website"&gt;Make a fancy website&lt;/h2&gt;
&lt;p&gt;By now, you have a lot of nicely organized content on the web.
This is still not quite what you want; the following things
could be improved.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You want it to be easy for you to add new material to the
  website.&lt;/li&gt;
  &lt;li&gt;You want the website to look pretty.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now that you have a bunch of content, you can play around with
a few different ways of arranging them fancy-like. So many
possibilities! Here are two main things to think about.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;How to add new content&lt;/li&gt;
  &lt;li&gt;How to manage the whole system&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Don’t worry about making it pretty or easy for other people to use.&lt;/p&gt;

&lt;h3 id="how-do-you-like-to-add-new-content"&gt;How do you like to add new content?&lt;/h3&gt;
&lt;p&gt;I like working with ordinary files, so I make new webpages by
making new files inside of a terminal. But you might prefer to
use a word processor on a website or to take videos with your phone.&lt;/p&gt;

&lt;h3 id="how-can-you-make-this-whole-system-easy-to-manage"&gt;How can you make this whole system easy to manage?&lt;/h3&gt;
&lt;p&gt;Lots of
things could go wrong when things get fancy like this. Pay attention
to things that seem annoying, and come up with ways around this.
Annoying things might include&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Maintaining whatever server you have&lt;/li&gt;
  &lt;li&gt;The process for uploading new files to the site&lt;/li&gt;
  &lt;li&gt;Having the appropriate software to edit your site&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Try to keep this fancy system simple. When it has to be complicated,
let the complicated things be either things you already understand
well or things that you’ll learn quickly.&lt;/p&gt;

&lt;h2 id="my-particular-website"&gt;My particular website&lt;/h2&gt;
&lt;p&gt;You probably want a website that isn’t exactly like mine, but it
might be worth explaining how my website works right now. If you’re
not the sort of person who knows what text files and Git are,
you might want to &lt;a href="#repeat"&gt;skip this section&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id="copying-it"&gt;Copying it&lt;/h3&gt;
&lt;p&gt;But before I explain any further, I would like to note that
you are welcome to base your website on mine; the source code
is &lt;a href="https://github.com/tlevine/www.thomaslevine.com"&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The process for editing it is designed very specifically for me,
so you might not like it. Also, it is not very well documented,
but if you’re having trouble figuring out how it works, write to
me, and I’ll document it better.&lt;/p&gt;

&lt;p&gt;If you want to use it, start by keeping all of the logic the same
and just changing things in the &lt;code&gt;content/!&lt;/code&gt; directory and in the
&lt;code&gt;content/index.haml&lt;/code&gt; file. Get something working, and worry later
about making it look pretty.&lt;/p&gt;

&lt;h3 id="notable-featurues"&gt;Notable featurues&lt;/h3&gt;
&lt;p&gt;If you don’t want to use it, you still might take some inspiration
from some of the decisions I made&lt;/p&gt;

&lt;h4 id="static-website-generator"&gt;Static website generator&lt;/h4&gt;
&lt;p&gt;My website doesn’t have anything where people log in or upload files
or otherwise send input to the server. Thus, I can serve my website
as ordinary files.&lt;/p&gt;

&lt;p&gt;Editing these files is annoying, so I use a static website generator that writes these files based on the simpler and less-annoying files
with which I configure my website. I happen to use
&lt;a href="http://nanoc.ws/"&gt;nanoc&lt;/a&gt;, but there are tons of them.&lt;/p&gt;

&lt;h4 id="git"&gt;Git&lt;/h4&gt;
&lt;p&gt;It scares me to edit things without tracking their history. I settled
a few years ago on using &lt;a href="http://git-scm.com"&gt;Git&lt;/a&gt; for this, so that’s
what I use for versioning the all of the content on my website.
(I’m right now making a distinction between content and logic.)&lt;/p&gt;

&lt;p&gt;When I build the site with nanoc, the resulting files go into the
&lt;code&gt;output&lt;/code&gt; directory, and then I upload them to a static file hosting
service (more on that later).&lt;/p&gt;

&lt;p&gt;This &lt;code&gt;output&lt;/code&gt; directory is a
&lt;a href="http://git-scm.com/book/en/Git-Tools-Submodules"&gt;git submodule&lt;/a&gt;
with just the resulting website. This is cool in case I ever can’t
get nanoc working in the future; even if I can’t rebuild the site,
I’ll be able to see what old versions looked like.&lt;/p&gt;

&lt;h4 id="git-remotes"&gt;Git remotes&lt;/h4&gt;
&lt;p&gt;It also scares me to edit things without having multiple backups on
different continents, so I have Git remotes. I used to use Gitorious,
and I still have my own server that I push things to, but I wind up
using GitHub a lot of the time. It works decently and isn’t annoying
once you’ve set things up the first time, but I don’t like this
because it’s proprietary&lt;/p&gt;

&lt;h4 id="github-pages"&gt;GitHub Pages&lt;/h4&gt;
&lt;p&gt;If you already have everything in Git and you’ve already given in to
proprietary GitHub software, you might as well use GitHub Pages to
host your website. GitHub Pages serves a website from files committed
to a Git repository.&lt;/p&gt;

&lt;p&gt;Recall that the compiled website goes into the &lt;code&gt;output&lt;/code&gt; directory and
that this directory is a git submodule. I push that submodule to
GitHub, and it gets served through GitHub Pages.&lt;/p&gt;

&lt;p&gt;I must point out that there are some things I don’t like about GitHub
Pages. First, as I said above, it’s proprietary. Second, I can’t serve
different pages depending on the
&lt;a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html"&gt;Accept-Language header&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id="directory-structure"&gt;Directory structure&lt;/h4&gt;
&lt;p&gt;I went with this directory structure for pages.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/!/this-cool-thing/index.html
/!/that-cool-thing/index.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This results in two pages, one at
&lt;code&gt;http://thomaslevine.com/!/this-cool-thing&lt;/code&gt;,
and the other at
&lt;code&gt;http://thomaslevine.com/!/that-cool-thing&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This structure is nice because it gives me a place to put more
than one file per page.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/!/this-cool-thing/index.html
/!/this-cool-thing/picture-of-thing.jpg
/!/that-cool-thing/index.html
/!/that-cool-thing/ugh-microsoft-word.docx
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id="remember-you-might-be-different"&gt;Remember, you might be different&lt;/h3&gt;
&lt;p&gt;I just explained how my site works, but you are probably not a clone
of me. Starting with my ideas might not be a bad idea, but try to come
up with something that suits you better.&lt;/p&gt;

&lt;h2 id="repeat"&gt;Repeat&lt;/h2&gt;
&lt;p&gt;It’s not like each of these steps only happens once.
I still have at least half a lifetime of stuff that I’ve written about, 
photographed, &amp;amp;c. but haven’t published on my website. I periodically
go through those old things and copy them to the site.&lt;/p&gt;

&lt;h2 id="review"&gt;Review&lt;/h2&gt;
&lt;p&gt;Making your personal website might seem daunting, but it’s easy if you
break it into tiny pieces. Start by saving everything. Once you have
a lot of things, organize them and write about them. Don’t worry very
much at first about making the website pretty; just get things started.
And in designing your website, focus on making it easy for you to add
content rather than on making it pleasant for other people to view.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2013-12-26:/!/socrata-products/index.html</id>
    <title type="html">Semi-open data about pricing of open data</title>
    <published>2013-12-26T00:00:00Z</published>
    <updated>2013-12-26T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/socrata-products/index.html"/>
    <content type="html">
&lt;p&gt;Some governments were awesome enough to open data about the
&lt;a href="https://github.com/tlevine/socrata-pricing/blob/master/d/"&gt;pricing of Socrata products&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I thought it would be interesting to figure out which plans different
Socrata clients were on and to see which features were most in demand.&lt;/p&gt;

&lt;h2 id="pricing-structure"&gt;Pricing structure&lt;/h2&gt;
&lt;p&gt;It looks like you’re getting one packaged open data portal website from
Socrata, but it’s sold as a bunch of different products. Also, the
Socrata Open Data Portal, even with all of its add-ons, is just the
beginning of Socrata’s offerings.&lt;/p&gt;

&lt;p&gt;I’m going to summarize it here, but
you can read more in any of the
&lt;a href="https://github.com/tlevine/socrata-pricing/blob/master/d/"&gt;price lists&lt;/a&gt;, such as the
&lt;a href="https://github.com/tlevine/socrata-pricing/blob/master/d/washington.xlsx"&gt;Washington price list&lt;/a&gt;&lt;/p&gt;

&lt;h3 id="socrata-open-data-portal"&gt;Socrata Open Data Portal&lt;/h3&gt;
&lt;p&gt;The main product that you hear about is the
&lt;a href="http://www.socrata.com/open-data-portal/"&gt;Socrata Open Data Portal&lt;/a&gt;.
There are three standard levels of service for this, called “Basic”,
“Extended” and “Enterprise”. Here are what I see as the main differences
among these plans.&lt;/p&gt;

&lt;p&gt;The basic plan (Soc-OD-B) is basically this:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;150 datasets&lt;/li&gt;
  &lt;li&gt;10 premium APIs&lt;/li&gt;
  &lt;li&gt;Costs just under $5,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here’s the extended plan (Soc-OD-Ex).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;500 datasets&lt;/li&gt;
  &lt;li&gt;25 premium APIs&lt;/li&gt;
  &lt;li&gt;Costs just under $10,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And here’s the enterprise plan (Soc-OD-Ent).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1,500 datasets&lt;/li&gt;
  &lt;li&gt;50 premium APIs&lt;/li&gt;
  &lt;li&gt;Costs just under $15,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The plans and their differences are a bit more complex,
so I remind you to read the
&lt;a href="https://github.com/tlevine/socrata-pricing/blob/master/d/washington.xlsx"&gt;Washington price list&lt;/a&gt;
if you care for the details.&lt;/p&gt;

&lt;h3 id="explorers"&gt;Explorers&lt;/h3&gt;
&lt;p&gt;There are special “explorer” tools for these specific datasets.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;311&lt;/li&gt;
  &lt;li&gt;Checkbook&lt;/li&gt;
  &lt;li&gt;Elections&lt;/li&gt;
  &lt;li&gt;Health indicators&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I don’t really know what these are, but Somerville seems to have a
&lt;a href="https://data.somervillema.gov/apps/three-one-one"&gt;311 explorer&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id="datacollect"&gt;DataCollect&lt;/h3&gt;
&lt;p&gt;DataCollect is “a cloud-based platform that simplifies the design, deployment, and management of intelligent data capture apps from authorized users”.&lt;/p&gt;

&lt;p&gt;Here’s the basic plan (Soc-DC-B).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;5 data collection apps&lt;/li&gt;
  &lt;li&gt;50 active forms&lt;/li&gt;
  &lt;li&gt;Costs just under $5,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here’s the extended plan (SOC-DC-Ex).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;10 data collection apps&lt;/li&gt;
  &lt;li&gt;100 active forms&lt;/li&gt;
  &lt;li&gt;Costs just under $10,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And here’s the enterprise plan (Soc-DC-Ent).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;20 data collection apps&lt;/li&gt;
  &lt;li&gt;500 active forms&lt;/li&gt;
  &lt;li&gt;Costs just under $20,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Based on the full description in the
&lt;a href="https://github.com/tlevine/socrata-pricing/blob/master/d/washington.xlsx"&gt;Washington price list&lt;/a&gt;,
I think there’s a lot more to DataCollect than I can see publically.&lt;/p&gt;

&lt;p&gt;On the other hand, I do think we can see some of it publically;
I’m guessing that the “active forms” are related to the
&lt;a href="/!/open-by-default#popularity-of-forms"&gt;form type&lt;/a&gt;
on the open data portal.&lt;/p&gt;

&lt;h3 id="govstat"&gt;GovStat&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://socrata.com/govstat"&gt;GovStat&lt;/a&gt;
is a big product (in terms of cost) that I didn’t look at.
I felt like it deserved its own section even though I’m not saying
much about it. It too has three levels of service&lt;/p&gt;

&lt;p&gt;Basic (Soc-GS-B) looks like this.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;2 dashboards&lt;/li&gt;
  &lt;li&gt;20 goals&lt;/li&gt;
  &lt;li&gt;150 datasets&lt;/li&gt;
  &lt;li&gt;Costs just under $7,500 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Extended (Soc-GS-Ex) is this.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;5 dashboards&lt;/li&gt;
  &lt;li&gt;100 goals&lt;/li&gt;
  &lt;li&gt;500 datasets&lt;/li&gt;
  &lt;li&gt;Costs just under $15,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And enterprise (Soc-GS-Ent) is this.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;20 dashboards&lt;/li&gt;
  &lt;li&gt;400 goals&lt;/li&gt;
  &lt;li&gt;1,500 datasets&lt;/li&gt;
  &lt;li&gt;Costs just under $30,000 per month&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id="many-others"&gt;Many others&lt;/h3&gt;
&lt;p&gt;There are a bunch of small things that I won’t explain in much
detail, but you can read about them in the various price lists.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ArcGIS Connect&lt;/li&gt;
  &lt;li&gt;API Foundry&lt;/li&gt;
  &lt;li&gt;Custom work&lt;/li&gt;
  &lt;li&gt;Training&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="data-for-the-present-analysis"&gt;Data for the present analysis&lt;/h2&gt;
&lt;p&gt;Today, I want to figure out which tier of Open Data Portal
service each client has purchased. With that in mind,
I collected four numbers (&lt;a href="/!/variables"&gt;variables&lt;/a&gt;) for each data portal.&lt;/p&gt;

&lt;p&gt;These two are related to the level (base, extended or enterprise)
of the Open Data Portal product.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Number of datasets &lt;/li&gt;
  &lt;li&gt;Number of premium APIs&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These two are related to other products.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Number of datasets with “311” in the title: This is a proxy for whether the 311 Explorer product is being used.&lt;/li&gt;
  &lt;li&gt;Number of forms: I think this tells us whether DataCollect is being used and which at which level (basic, extended or enterprise)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="acquiring-the-data"&gt;Acquiring the data&lt;/h2&gt;
&lt;p&gt;I collected all of the data over the past week.
I downloaded lots of files,
put them into an SQLite3 database, and
then I ran the following
&lt;a href="https://github.com/tlevine/open-data/blob/master/reports/socrata-pricing.sql"&gt;queries&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To count &lt;strong&gt;datasets&lt;/strong&gt;, I
&lt;a href="https://github.com/tlevine/open-data/blob/master/download.py"&gt;called the search API&lt;/a&gt; and
&lt;a href="/!/socrata-deduplicate"&gt;removed federation and derived views&lt;/a&gt;.
I arrived at the number of &lt;a href="/!/socrata-genealogies#term-table"&gt;tables&lt;/a&gt;
per data portal.&lt;/p&gt;

&lt;p&gt;To count &lt;strong&gt;APIs&lt;/strong&gt;, I
&lt;a href="https://github.com/tlevine/open-data/blob/master/apis.py"&gt;went&lt;/a&gt;
to the following URL for each data portal.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;https://${catalog}/browse?limitTo=apis&amp;amp;utf8=%E2%9C%93
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href="https://data.hawaii.gov/browse?limitTo=apis&amp;amp;utf8=%E2%9C%93"&gt;Here&lt;/a&gt;’s an example.&lt;/p&gt;

&lt;p&gt;To count &lt;strong&gt;311 datasets&lt;/strong&gt;, I just searched for datasets with “311” in their titles.&lt;/p&gt;

&lt;p&gt;And to count &lt;strong&gt;forms&lt;/strong&gt;, I just looked for datasets with a &lt;code&gt;displayType&lt;/code&gt; of “form”.&lt;/p&gt;

&lt;h2 id="results"&gt;Results&lt;/h2&gt;

&lt;h3 id="summary"&gt;Summary&lt;/h3&gt;
&lt;p&gt;This graph is pretty cool.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/fancy.png" alt="Plot of number of datasets, number of APIs and presence of forms" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The x-axis tells us the number of datasets on a portal, the y-axis tells us the number
of special APIs, and the color tells us whether the portal contains any
&lt;a href="/!/open-by-default#popularity-of-forms"&gt;form views&lt;/a&gt;.
Most catalogs have no APIs, and these tend to also have few datasets; that’s the cluster
at the bottom-left.&lt;/p&gt;

&lt;p&gt;The three nested rectangles correspond to the three levels of service for the
Socrata Open Data Portal software (basic, extended and enterprise) based on
number of datasets and number of APIs.
For example, portals inside the “Basic” rectangle are within the basic tier of usage.
This gets us to my guess as to what plans people are on.&lt;/p&gt;

&lt;h3 id="which-plan"&gt;Which plan?&lt;/h3&gt;
&lt;p&gt;Based only on the number of datasets and APIs, here are some rough guesses as to which
plans people are on. I’m guessing about the following products&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Which tier of the Socrata Open Data Portal product has been purchased&lt;/li&gt;
  &lt;li&gt;Whether Socrata DataCollect product has been purchased&lt;/li&gt;
  &lt;li&gt;Whether there are any 311 datasets, as proxy for whether the 311 Explorer has
  been purchased (This is the only guess that doesn’t relate to the previous plot.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As I explain &lt;a href="#validation"&gt;below&lt;/a&gt;, these guesses are based only
on public data, so I think that they are low.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style="text-align: left"&gt;Catalog&lt;/th&gt;
      &lt;th style="text-align: left"&gt;Data Portal plan&lt;/th&gt;
      &lt;th style="text-align: left"&gt;DataCollect plan&lt;/th&gt;
      &lt;th style="text-align: left"&gt;Has 311?&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;bronx.lehman.cuny.edu&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;controllerdata.lacity.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.acgov.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.act.gov.au&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.austintexas.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.baltimorecity.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.cdc.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.ci.newark.nj.us&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.cityofboston.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.cityofdeleon.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.cityofmadison.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.cms.hhs.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.colorado.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.dcpcsb.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.edmonton.ca&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.energystar.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.hawaii.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.honolulu.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.kcmo.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.maryland.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.medicare.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.montgomerycountymd.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.nola.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.ny.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Enterprise&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.oaklandnet.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.ok.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.oregon.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.providenceri.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.raleighnc.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.redmond.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.seattle.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.sfgov.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.slcgov.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.somervillema.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.southbendin.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.undp.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.wa.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.weatherfordtx.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;data.wellingtonfl.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;dati.lombardia.it&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;finances.worldbank.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;health.data.ny.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;healthmeasures.aspe.hhs.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;info.samhsa.gov&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;nmfs.socrata.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;nycopendata.socrata.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Enterprise&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;opendata.go.ke&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;www.criminalytics.org&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;www.dallasopendata.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;www.halifaxopendata.ca&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;www.metrochicagodata.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Enterprise&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Basic&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;www.opendatanyc.com&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Extended&lt;/td&gt;
      &lt;td style="text-align: left"&gt;None&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id="number-of-forms"&gt;Number of forms&lt;/h3&gt;
&lt;p&gt;Note my choice to show the binary variable of whether any forms were on the portal
(more that zero) rather than showing the count of forms. I did this because no portals
had more than 50 publically visible forms, which is the threshold for jumping to
the extended plan (if I’m interpreting things correctly).&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/forms.png" alt="Histogram of form counts" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;I think that the “Has form” variable tells us whether the client has purchased
at least the basic plan of DataCollect, and the number of forms doesn’t tell us
much more about the product that the client has purchased.&lt;/p&gt;

&lt;h3 id="validation"&gt;Validation&lt;/h3&gt;
&lt;p&gt;I’ve heard from Socrata employees that four-fifths of Socrata’s data are private,
so this is a very low estimate. It would nice to get some
idea as to how wrong this is.&lt;/p&gt;

&lt;p&gt;Most of the documents I found about pricing are just price
lists, but two of them indicate specific proposed purchases.
One of them is a super-basic plan (more basic than &lt;code&gt;Soc-OD-B&lt;/code&gt;)
for Sacramento, and Sacramento doesn’t appear in the present data.
The other is for Hawaii, and that one does.&lt;/p&gt;

&lt;p&gt;&lt;img src="hawaii.png" alt="Picture of proposed purchases from Socrata by Hawaii" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The plan for the Socrata Open Data Portal is called “Premium”,
which is not one of the standard names; the price list just has
“Basic”, “Extended”, and “Enterprise”. However, it seems to be
pretty close to the Basic plan.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The price is about right. (The basic plan is usually a bit
  under $5,000.)&lt;/li&gt;
  &lt;li&gt;The “delivery”, which I presume means “bandwidth”, is about
  right. (It’s 1.25 TB, and the basic plan is 1 TB.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My guesswork above suggests that Hawaii is on the extended plan,
but this document suggests that Hawaii is on something like the
basic plan. There are a few decent explanations for this.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Hawaii did not end up making this particular purchase.&lt;/li&gt;
  &lt;li&gt;Hawaii made this particular purchase, and it later increased its
  plan as it added more data.&lt;/li&gt;
  &lt;li&gt;The “Premium” plan has all of these special features.&lt;/li&gt;
  &lt;li&gt;I messed up somewhere.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My above guesswork also suggests that Hawaii has purchased
DataCollect, but I don’t see DataCollect in the Hawaii document.&lt;/p&gt;

&lt;p&gt;Hawaii has been hailed as a good example of government open data,
my hunch is that they wound up needing a bigger plan in order to
support their growing initiative.&lt;/p&gt;

&lt;h2 id="thoughts-on-metrics"&gt;Thoughts on metrics&lt;/h2&gt;
&lt;p&gt;I’ve recently been thinking about new metrics for progress in our
data portal efforts, because number of datasets
&lt;a href="/!/socrata-deduplicate"&gt;doesn’t say much&lt;/a&gt;.
For example, I’ve looked at &lt;a href="/!/open-data-licensing"&gt;licensing&lt;/a&gt;
and &lt;a href="/!/data-updatedness"&gt;updating&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This look into pricing might shed some light on why we have been
using the metric of number of datasets: The pricing is structured
based on number of datasets. There are a bunch of other metrics
in the &lt;a href="/!/socrata-metrics-api"&gt;site metrics API&lt;/a&gt;, and most (all?)
of these metrics are also part of the definitions of the tiers of
service for the Socrata Open Data Portal product.&lt;/p&gt;

&lt;h2 id="future-research"&gt;Future research&lt;/h2&gt;
&lt;p&gt;I don’t feel like I’ve done much here beyond pointing out that one
could look at the pricing of software. I really wanted to see what
features people have in their plans and which ones people wind up
using (like I did when looking at the use of &lt;a href="/!/socrata-users"&gt;charting tools&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I also wanted to get some idea of what people wind up doing when
they’re reaching the limits of their plans. At some point they’ll
probably buy a new one, maybe they also come up with interesting
ways of reducing the number of datasets that they have.
I’d need rather reliable knowledge about each client’s plan in order
to do this.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2013-12-22:/!/variables/index.html</id>
    <title type="html">Two meanings of "variable"</title>
    <published>2013-12-22T00:00:00Z</published>
    <updated>2013-12-22T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/variables/index.html"/>
    <content type="html">&lt;h2 id="introduction"&gt;Introduction&lt;/h2&gt;

&lt;h3 id="variable-in-an-equation"&gt;Variable in an equation&lt;/h3&gt;
&lt;p&gt;If you ever took an algebra class, you’ll think that
&lt;em&gt;x&lt;/em&gt; in the following equation is a variable.&lt;/p&gt;

&lt;script type="math/tex; mode=display"&gt;12 = x + 7&lt;/script&gt;

&lt;h3 id="variable-in-a-data-table"&gt;Variable in a data table&lt;/h3&gt;
&lt;p&gt;As I’ve &lt;a href="/!/table-words"&gt;explained prevously&lt;/a&gt;, when I say “variable”,
I’m usually talking about a column in a data table. That is, “variable”
is a synonym for “column”.&lt;/p&gt;

&lt;p&gt;This meaning of the word “variable” can be confusing if you were taught
a different meaning of “variable” in school. You might find it strange that
we use the word “variable” in two seemingly different ways. In fact,
I usually think of these as different meanings of the word “variable”.&lt;/p&gt;

&lt;h3 id="relatedness"&gt;Relatedness&lt;/h3&gt;
&lt;p&gt;It turns out that these two senses of “variable” are quite related.
In the current blog post, I hope to explain why we use the same word to
describe two concepts that seem sort of different.&lt;/p&gt;

&lt;h2 id="fitting-models"&gt;Fitting models&lt;/h2&gt;
&lt;p&gt;Once we have created a data table, we might decide to make a fancy equation that
explains how some values in the table are related to each other. We might call
this a &lt;em&gt;fitted model&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Here’s part of a data table about the wealth and health of nations.
(You may have &lt;a href="/!/table-words#rows-and-columns"&gt;seen this before&lt;/a&gt;.)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Year&lt;/th&gt;
      &lt;th&gt;Country&lt;/th&gt;
      &lt;th&gt;Life expectancy (years)&lt;/th&gt;
      &lt;th&gt;Income Per Person&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;2012&lt;/td&gt;
      &lt;td&gt;United States&lt;/td&gt;
      &lt;td&gt;79&lt;/td&gt;
      &lt;td&gt;$41,678&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2012&lt;/td&gt;
      &lt;td&gt;Ukraine&lt;/td&gt;
      &lt;td&gt;68&lt;/td&gt;
      &lt;td&gt;$6,390&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2012&lt;/td&gt;
      &lt;td&gt;Ethiopia&lt;/td&gt;
      &lt;td&gt;63&lt;/td&gt;
      &lt;td&gt;$959&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;What we’re calling “income per person” is technically gross-domestic product per
capita, adjusted for purchasing power parity and inflation. But don’t worry about
that if it sounds like Greek.&lt;/p&gt;

&lt;p&gt;Here’s a fancy &lt;a href="http://www.gapminder.org/world/#$majorMode=chart$is;shi=t;ly=2003;lb=f;il=t;fs=11;al=30;stl=t;st=t;nsl=t;se=t$wst;tts=C$ts;sp=5.59290322580644;ti=2012$zpv;v=0$inc_x;mmid=XCOORDS;iid=phAwcNAVuyj1jiMAkmq1iMg;by=ind$inc_y;mmid=YCOORDS;iid=phAwcNAVuyj2tPLxKvvnNPA;by=ind$inc_s;uniValue=8.21;iid=phAwcNAVuyj0XOoBL_n5tAQ;by=ind$inc_c;uniValue=255;gid=CATID0;by=grp$map_x;scale=log;dataMin=283;dataMax=110808$map_y;scale=lin;dataMin=18;dataMax=87$map_s;sma=49;smi=2.65$cd;bd=0$inds=;example=75"&gt;graph&lt;/a&gt;
of the data.&lt;/p&gt;

&lt;p&gt;And here’s an equation that describes those data.&lt;/p&gt;

&lt;!-- 
lm(formula = c(79, 68, 63) ~ log(c(41678, 6390, 959)))
lm(formula = c(79, 68, 63) ~ log10(c(41678, 6390, 959)))
--&gt;

&lt;script type="math/tex; mode=display"&gt;Predicted\; life\; expectancy = 32 + 4.239 \times log\left(Income\; per\; person\right)&lt;/script&gt;

&lt;p&gt;In this equation, life expectency and income per person
just numbers that we take from one row of the table.
To make that look more like what you might be used to, let’s
rewrite it like this.&lt;/p&gt;

&lt;script type="math/tex; mode=display"&gt;y = 32 + 4.239 \times log\left(x\right)&lt;/script&gt;

&lt;p&gt;By distilling this relationship to a simple equation, we can express complex
information as a simple summary of it is small enough to fit in our brains.&lt;/p&gt;

&lt;h3 id="making-predictions"&gt;Making predictions&lt;/h3&gt;
&lt;p&gt;There are lots of ways we can use this equation (the fitted model).
Right now, we’re just going to talk about using the equation to make
predictions.&lt;/p&gt;

&lt;p&gt;Typically we write the equation such that the left side is the thing
we are predicting and the right side is the stuff we know. This is
how I’ve been writing it so far, so we are predicting life expectency
(&lt;em&gt;y&lt;/em&gt;) based on income per person (&lt;em&gt;x&lt;/em&gt;). Let’s say that we have measured
the income per person of another country but don’t know the life
expectency. We can use our equation to predict it! Here’s a new row&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Year&lt;/th&gt;
      &lt;th&gt;Country&lt;/th&gt;
      &lt;th&gt;Life expectancy (years)&lt;/th&gt;
      &lt;th&gt;Income Per Person&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;2012&lt;/td&gt;
      &lt;td&gt;China&lt;/td&gt;
      &lt;td&gt;&lt;!-- 75 --&gt; unknown&lt;/td&gt;
      &lt;td&gt;$9,502&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We know China’s income per person &lt;em&gt;x&lt;/em&gt;, so let’s plug that into our
equation to predict China’s life expectency.&lt;/p&gt;

&lt;script type="math/tex; mode=display"&gt;y = 32 + 4.239 \times log\left(9502\right)&lt;/script&gt;

&lt;script type="math/tex; mode=display"&gt;y = 32 + 4.239 \times 9.159258&lt;/script&gt;

&lt;script type="math/tex; mode=display"&gt;y = 32 + 38.82609&lt;/script&gt;

&lt;script type="math/tex; mode=display"&gt;y = 70.82609&lt;/script&gt;

&lt;script type="math/tex; mode=display"&gt;y \approx 71 &lt;/script&gt;

&lt;p&gt;We thus predict China’s life expectency to be 71 years.
The actual value is 75, so that’s pretty close.&lt;/p&gt;

&lt;p&gt;Let’s get back to why these two senses of variable are the same
thing. Our fitted model is an equation with two variables, income per
person and life expectency. Each of these variables corresponds
to a column in our data table.&lt;/p&gt;

&lt;p&gt;In the first data table I presented, we knew the values of all
of the cells. That is, we knew the income per person and life
expectancy for each of the three countries.&lt;/p&gt;

&lt;p&gt;In the second table, we didn’t only knew the value for one of
the two variables (income per person). In order to predict the value
for the other variable (life expectency), we plugged in the
variable that we did know into our equation, and we solved
it for the variable that we didn’t know.&lt;/p&gt;

&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The word “variable” sort of has two senses, and it can be confusing
to listen to data scientists when you don’t realize this.&lt;/p&gt;

&lt;p&gt;If you’ve taken an algebra class, you probably think of a variable as
a letter in an equation.&lt;/p&gt;

&lt;p&gt;When data scientists talk about variables, that &lt;em&gt;might&lt;/em&gt; be what they mean.
But they might also be talking about columns in data tables.&lt;/p&gt;

&lt;p&gt;These two meanings of the word “variable” arise because of we model
data. We come up with equations to describe the relationships within the dataset,
so a variable in the column sense is sort of like a lot of variables in the
letter-in-an-equation sense. Once we have our fitted model (equation), we can
plug in variables for some of the variables in order to predict other
variables.&lt;/p&gt;

&lt;p&gt;We’ll often solve the same equation as many times as we have rows in our
table, so it’s sort of like we’re plugging a whole column of numbers into
our equation rather than just a single number.&lt;/p&gt;

&lt;p&gt;&lt;img src="variables.jpg" alt="Explanatory picture could go here." class="wide" /&gt;&lt;/p&gt;

&lt;h2 id="ask-more-questions"&gt;Ask more questions&lt;/h2&gt;
&lt;p&gt;What else are you wondering about data science?
Tell me what I should write about next week.&lt;/p&gt;
</content>
  </entry>
</feed>

