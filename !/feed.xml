<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://www.thomaslevine.com/</id>
  <title>Thomas Levine</title>
  <updated>2014-01-31T00:00:00Z</updated>
  <link rel="alternate" href="http://www.thomaslevine.com/"/>
  <link rel="self" href="http://www.thomaslevine.com/!/feed.xml"/>
  <author>
    <name>Thomas Levine</name>
    <uri>http://www.thomaslevine.com</uri>
  </author>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-31:/!/open-data-500-data-dictionary/index.html</id>
    <title type="html">A data dictionary of the Open Data 500 data</title>
    <published>2014-01-31T00:00:00Z</published>
    <updated>2014-01-31T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/open-data-500-data-dictionary/index.html"/>
    <content type="html">&lt;style&gt;
tr { text-align: left; }
&lt;/style&gt;

&lt;p&gt;The &lt;a href="http://www.opendata500.com/download/"&gt;Open Data 500&lt;/a&gt; is
“the first comprehensive study of U.S. companies using open government data to develop new products and services.”
You may have read about it in.
&lt;a href="http://www.forbes.com/sites/bethsimonenoveck/2014/01/08/from-faith-based-to-evidence-based-the-open-data-500-and-understanding-how-open-data-helps-the-american-economy/"&gt;Forbes&lt;/a&gt;,
&lt;a href="http://www.informationweek.com/government/open-government/open-government-data-companies-cash-in/d/d-id/1113143"&gt;Information Week&lt;/a&gt;, or
&lt;a href="http://fedscoop.com/open-data-500-intersection-open-data-economy/"&gt;Fedscoop&lt;/a&gt;
This is &lt;a href="/open-data"&gt;data about open data&lt;/a&gt;, so I naturally wanted it.&lt;/p&gt;

&lt;p&gt;The Open Data 500 Team doesn’t provide a data dictionary, so I pieced one
together for my own purposes. And I figured somebody else might want it for
her own purposes, so here it is. The present article discusses&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;What the Open Data 500 is, in terms of research methods&lt;/li&gt;
  &lt;li&gt;How the released data files are structured&lt;/li&gt;
  &lt;li&gt;Clarification of some possible points of confusion&lt;/li&gt;
  &lt;li&gt;Recommendations as to how to work with the data&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id="data-collection-methods"&gt;Data collection methods&lt;/h2&gt;
&lt;p&gt;The Open Data 500 looks a bit scary and complicated when you read its website
and the articles about it, but the Open Data 500 is pretty much just a
straightforward questionnaire survey.&lt;/p&gt;

&lt;h3 id="the-population-of-interest"&gt;The population of interest&lt;/h3&gt;
&lt;p&gt;The Open Data 500 Team is interested in companies that meet their
&lt;a href="http://www.opendata500.com/about/#about-eligibility"&gt;eligibility criteria&lt;/a&gt;,
which they describe as follows.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Be U.S.-based – which can include international companies with a major presence in the U.S.&lt;/li&gt;
  &lt;li&gt;Earn revenue from its products and services. In addition to for-profit companies, nonprofits may qualify if they support themselves primarily through sales of products and services rather than philanthropy.&lt;/li&gt;
  &lt;li&gt;Use open government data as a critical resource for its business. (While most Open Data 500 companies will work with federal data, the study will also include some that use city or state data if their work can scale regionally or nationally)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The Open Data 500 site does not explain how they operationalize these criteria,
but I presume that it works as follows.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The questionnaire must indicate that a company has a major presence in the U.S.&lt;/li&gt;
  &lt;li&gt;The answer to “Which of the following are significant sources of revenue for your company?”
  must include something other than “Philanthropy”.&lt;/li&gt;
  &lt;li&gt;The answer to “Which of the following are critical sources of data for your company?”
  must include “Federal Open Data”, the questionnaire must indicate elsewhere that
  the company is using state or city data from a range of states or cities.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;They are “&lt;a href="http://www.opendata500.com/about/#about-vetted"&gt;vetting&lt;/a&gt;” companies,
but this sounds like just a conversation with the submitters to check that they
understood the questionnaire properly.&lt;/p&gt;

&lt;h3 id="comprehensive-call-sampling-strategy"&gt;Comprehensive call sampling strategy&lt;/h3&gt;
&lt;p&gt;The Open Data 500 uses a sampling strategy that they term “comprehensive call”.
That sounds really complicated, but it’s actually quite simple.&lt;/p&gt;

&lt;p&gt;The questionnaire results can be considered a convenience sample
&lt;a href="http://en.wikipedia.org/wiki/Accidental_sampling"&gt;convenience sample&lt;/a&gt;
of companies that meet the Open Data 500 eligibility criteria.&lt;/p&gt;

&lt;p&gt;The Open Data 500 Team distributed links to the questionnaire in
&lt;a href="http://www.opendata500.com/about/#about-identify"&gt;these places&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;Recommendations from government and non-governmental organizations studying this field.&lt;/li&gt;
    &lt;li&gt;List of companies using datasets from Data.gov, the federal hub for government data&lt;/li&gt;
    &lt;li&gt;Online Open Data Userbase created by Socrata&lt;/li&gt;
    &lt;li&gt;Directory of open data companies developed by Deloitte&lt;/li&gt;
    &lt;li&gt;Mass email to 3100 people in the GovLab network&lt;/li&gt;
    &lt;li&gt;Mass email to 2200 people on contact list for OpenDataNow.com, website of Open Data 500 project director Joel Gurin&lt;/li&gt;
    &lt;li&gt;Companies identified in research for upcoming book, Open Data Now&lt;/li&gt;
    &lt;li&gt;Response to coverage of the Open Data 500 in Information Week and FedScoop&lt;/li&gt;
    &lt;li&gt;Outreach through Twitter&lt;/li&gt;
    &lt;li&gt;Outreach at “Data Transparency 2013” conference (September 2013, Washington, DC)&lt;/li&gt;
    &lt;li&gt;Blog posts on TheGovLab.org and OpenDataNow.com&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;That’s all that “comprehensive call” means!&lt;/p&gt;

&lt;p&gt;I think their use of comprehensive call is why the Open Data 500 Team considers
the Open Data 500 to be a comprehensive study.&lt;/p&gt;

&lt;h3 id="undocumented-data-collection"&gt;Undocumented data collection&lt;/h3&gt;
&lt;p&gt;Open Data 500 Team solicited responses to
&lt;a href="http://www.opendata500.com/submitCompany/"&gt;this questionnaire&lt;/a&gt; through
&lt;a href="#comprehensive-call-sampling-strategy"&gt;comprehensive call&lt;/a&gt;,
 but they also looked for companies
that did not respond to the questionnaire.&lt;/p&gt;

&lt;p&gt;I couldn’t find any documentation about the process they went through for
collecting data without the questionnaire. After talking to one of the Team
members, I think that the Team collected data about these companies without
talking directly to anyone who works there, but I do not know how they chose
the companies nor how they collected the data.&lt;/p&gt;

&lt;h3 id="case-study"&gt;Case study&lt;/h3&gt;
&lt;p&gt;In both the questionnaire section of the study and in the undocumented data
collection, only companies that meet the eligibility criteria are considered.
Thus, the Open Data 500 is a &lt;a href="http://en.wikipedia.org/wiki/Case_study"&gt;case study&lt;/a&gt;
of companies that meet the Open Data 500 eligibility criteria; there is not
a control group of companies that do not meet the criteria.&lt;/p&gt;

&lt;h2 id="just-a-questionnaire"&gt;Just a questionnaire&lt;/h2&gt;
&lt;p&gt;This is the main thing that confused me about the study, so I’m going to
explain this part in a bit more depth in case anyone else was also confused.&lt;/p&gt;

&lt;p&gt;Aside from the undocumented data collection, which produces only coarse information,
the data collection for the Open Data 500 is just the questionnaire.
&lt;strong&gt;Really&lt;/strong&gt;.
For example, the Team isn’t looking at companies products to see which open data
are used, and it isn’t looking at annual reports to determine whether the
company does a lot of business in the United States. This is confusing because
the data releases do not look like the questionnaire, but I’m pretty sure that
the data come rather directly from the questionnaire.&lt;/p&gt;

&lt;h2 id="sample-size"&gt;Sample size&lt;/h2&gt;
&lt;p&gt;It is unclear to me how many companies responded to the questionnaire, but I
think it is either 51 companies or
100 companies.
I explain this more in the
&lt;a href="#which-companies-are-in-the-preview?"&gt;Which companies are in the preview?&lt;/a&gt;
section.&lt;/p&gt;

&lt;h2 id="pre-launch"&gt;Pre-launch&lt;/h2&gt;
&lt;p&gt;According to the “&lt;a href="http://www.opendata500.com/about"&gt;About&lt;/a&gt;” page on the
Open Data 500 site, the Open Data 500 “will identify, describe, and analyze
companies that use open government data in their businesses.”&lt;/p&gt;

&lt;p&gt;As I understand it, the analysis component of this has yet to occur.
At the moment, the Open Data 500 is in “pre-launch”. This means that they have
begun to collect data but that they haven’t done any sort of analysis on it.
(This part isn’t explained on the website, but a member of the Open Data 500
Team explained this to me in person.)&lt;/p&gt;

&lt;h2 id="data-files"&gt;Data files&lt;/h2&gt;
&lt;p&gt;The Open Data 500 Team has released six main data files.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href="http://www.opendata500.com/download/Preview50_Companies.csv"&gt;&lt;code&gt;Preview50_Companies.csv&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://www.opendata500.com/download/500_Companies.csv"&gt;&lt;code&gt;500_Companies.csv&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://www.opendata500.com/download/OD500_Companies.json"&gt;&lt;code&gt;OD500_Companies.json&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://www.opendata500.com/download/OD500_Datasets.json"&gt;&lt;code&gt;OD500_Datasets.json&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://www.opendata500.com/preview/"&gt;&lt;code&gt;preview&lt;/code&gt;&lt;/a&gt; (HTML)&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://www.opendata500.com/candidates/"&gt;&lt;code&gt;candidates&lt;/code&gt;&lt;/a&gt; (HTML)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There are also individual pages about each company, but I’m pretty sure that
the only extra information on those is comments submitted through the comment
forms.&lt;/p&gt;

&lt;h3 id="preview50companiescsv"&gt;Preview50_Companies.csv&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.opendata500.com/download/Preview50_Companies.csv"&gt;&lt;code&gt;Preview50_Companies.csv&lt;/code&gt;&lt;/a&gt;
is a denormalized CSV file with
25 columns and 102 rows.
Each row corresponds to a dataset within a company, and
each column corresponds to a question from the
&lt;a href="http://www.opendata500.com/submitCompany/"&gt;questionnaire&lt;/a&gt;.
51 different companies are
represented in this dataset.&lt;/p&gt;

&lt;p&gt;The column names in this file correspond quite closely to the name
attributes in the HTML form source code for the questionnaire.&lt;/p&gt;

&lt;p&gt;These columns describe the companies, and they are identical across different
rows about the same company. &lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code in the file&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;CompanyName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Name of your company&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Company URL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;city&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;In which city is this company located?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;STATE&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;State [1]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;abbrev&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;State [1]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;zipCode&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Zip Code&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;ceoFirstName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;First Name of CEO&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;ceoLastName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Last Name of CEO&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyPreviousName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;???&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;yearFounded&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Founding Year&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;FTE&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Number of FTE’s [2]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyType&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Type of Company (Data management and analysis, Nonprofit, Private, Public) [3]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyCategory&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What category best describes your company? (Business &amp;amp; Legal Services, Data/Technology, Education, Energy, Environment &amp;amp; Weather, Finance &amp;amp; Investment, Food &amp;amp; Agriculture, Geospatial/Mapping, Governance, Healthcare, Housing/Real Estate, Lifestyle &amp;amp; Consumer, Scientific Research) [1]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyFunction&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Which best describes the function of your company? (many different levels) [3]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;sectors&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What category best describes your company? (many different levels) [1,3]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;revenueSource&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Which of the following are significant sources of revenue for your company? [4]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;descriptionLong&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Please give us a short public statement describing your company’s mission and work. You can take this material from your website or other publications if you choose to.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;descriptionShort&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;As a summary, please provide a one sentence description of your company.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;socialImpact&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Besides revenue generation, how do you measure the impact your company has for society and the public good?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;financialInfo&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Please include any financial or operational information that will help us understand your company. We are interested in specific information like past and projected annual revenues, total outside investment dollars to date, and significant investors or partners.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;criticalDataTypes&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Which of the following are critical sources of data for your company? By “critical,” we mean that your company would have to shut down a line of business, shut down completely, or replace the data in some way if the data were no longer available.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;It does not include the following questions from that first page of the questionnaire.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code from the web form&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;firstName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;First Name [5]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;lastName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Last Name&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;title&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Title&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;email&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Email&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;phone&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Phone&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;contacted&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Please check here if you would be willing to be contacted for further information about your company.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;datasetWishList&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What datasets (if any) are not currently available that would be useful for your company to have as government open data?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyRec&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What other companies, either in your sector or other sectors, would you recommend we contact regarding their use of government open data?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;conferenceRec&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What conferences or events do you think would be helpful to us in surveying the field of open data companies?&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The following columns come from the
&lt;a href="http://www.opendata500.com/addData/52eb5431def7fa00029abc8f/"&gt;“New Dataset”&lt;/a&gt;
page of the questionnaire.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code in the file&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;datasetName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Name of Dataset&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;datasetURL&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;URL of Dataset&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;agencyOrDatasetSource&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Agency or Source&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The file does not include the following columns from the “New Dataset” page.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code from the web form&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;typeOfDataset&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Type of Dataset (Federal Open Data, State Open Data, City/Local Open Data, Other)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;rating&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;On a scale of 1 to 4, how would you rate the usefulness of this dataset? (1- poor, 4- excellent) Your answer can reflect your experience with data quality, format of the data, or other factors.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Why did you give it this rating?&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Finally, there is also a &lt;code&gt;DATASETS&lt;/code&gt; column, which is the number of datasets
submitted for the particular the company.&lt;/p&gt;

&lt;p&gt;You can think of this file as a CSV version of &lt;code&gt;OD500_Companies.json&lt;/code&gt;.&lt;/p&gt;

&lt;!-- all(unique(sort(preview.csv$CompanyName)) == sort(sapply(candidates.json, function(x){x$companyName}))) --&gt;

&lt;p&gt;Notes:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In some cases, answers to one question are presented redundantly across
 multiple columns.&lt;/li&gt;
  &lt;li&gt;“FTE” probably stands for “full-time equivalent employees”.&lt;/li&gt;
  &lt;li&gt;The questionnaire has different categories from the levels reported in
 this file.&lt;/li&gt;
  &lt;li&gt;This cell contains a comma-and-space (&lt;code&gt;, &lt;/code&gt;) delimited list of items,
 and I haven’t picked apart the lists to find all of the possible values
 in the list.&lt;/li&gt;
  &lt;li&gt;This is from the “Personal Information” section, which presumably
 describes the person who is filling out the questionnaire.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id="companiescsv"&gt;500_Companies.csv&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.opendata500.com/download/500_Companies.csv"&gt;&lt;code&gt;500_Companies.csv&lt;/code&gt;&lt;/a&gt;
is a CSV file with
7 columns and 503 rows.
Each row corresponds to a unique company, and
each column corresponds to a question from the
&lt;a href="http://www.opendata500.com/submitCompany/"&gt;questionnaire&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code in the file&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;CompanyName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Name of your company&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Company URL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;city&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;In which city is this company located?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;STATE&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;State&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;abbrev&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;State&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;zipCode&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Zip Code&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyCategory&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What category best describes your company? (Business &amp;amp; Legal Services, Data/Technology, Education, Energy, Environment &amp;amp; Weather, Finance &amp;amp; Investment, Food &amp;amp; Agriculture, Geospatial/Mapping, Governance, Healthcare, Housing/Real Estate, Lifestyle &amp;amp; Consumer, Scientific Research)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;descriptionShort&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;As a summary, please provide a one sentence description of your company.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;This file provides no data about datasets used by the companies.&lt;/p&gt;

&lt;p&gt;Recall that the study includes both questionnaire data and data collected
by undocumented means. This file contains data collected by both methods.&lt;/p&gt;

&lt;h3 id="od500companiesjson"&gt;OD500_Companies.json&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.opendata500.com/download/OD500_Companies.json"&gt;&lt;code&gt;OD500_Companies.json&lt;/code&gt;&lt;/a&gt;
is a JSON file with an array of associative arrays (that is, a list of mappings).
It has 51 rows (associative ararys) and 
22 columns (items per associative array).
Each row corresponds to a unique company,
and each column corresponds to a questionnaire question.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code in the file&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Name of your company&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;url&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Company URL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;city&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;In which city is this company located?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;state&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;State [1]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;zipCode&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Zip Code&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;ceoFirstName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;First Name of CEO&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;ceoLastName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Last Name of CEO&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;previousName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;???&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;yearFounded&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Founding Year&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;fte&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Number of FTE’s [2]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyType&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Type of Company (Data management and analysis, Nonprofit, Private, Public) [3]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyCategory&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What category best describes your company? (Business &amp;amp; Legal Services, Data/Technology, Education, Energy, Environment &amp;amp; Weather, Finance &amp;amp; Investment, Food &amp;amp; Agriculture, Geospatial/Mapping, Governance, Healthcare, Housing/Real Estate, Lifestyle &amp;amp; Consumer, Scientific Research) [1]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyFunction&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Which best describes the function of your company? (many different levels) [3]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;sector&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What category best describes your company? (many different levels) [1,3]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;revenueSource&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Which of the following are significant sources of revenue for your company?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;descriptionLong&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Please give us a short public statement describing your company’s mission and work. You can take this material from your website or other publications if you choose to.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;descriptionShort&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;As a summary, please provide a one sentence description of your company.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;socialImpact&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Besides revenue generation, how do you measure the impact your company has for society and the public good?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;soccialInfo&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Please include any financial or operational information that will help us understand your company. We are interested in specific information like past and projected annual revenues, total outside investment dollars to date, and significant investors or partners.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;criticalDataTypes&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Which of the following are critical sources of data for your company? By “critical,” we mean that your company would have to shut down a line of business, shut down completely, or replace the data in some way if the data were no longer available.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;!-- subset(preview.csv, CompanyName == 'BillGuard')[1,'financialInfo'] == preview.json[[3]]$socialInfo --&gt;

&lt;p&gt;It does not include the following questions from that first page of the questionnaire.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code from the web form&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;firstName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;First Name [4]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;lastName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Last Name&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;title&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Title&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;email&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Email&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;phone&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Phone&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;contacted&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Please check here if you would be willing to be contacted for further information about your company.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;datasetWishList&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What datasets (if any) are not currently available that would be useful for your company to have as government open data?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;companyRec&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What other companies, either in your sector or other sectors, would you recommend we contact regarding their use of government open data?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;conferenceRec&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;What conferences or events do you think would be helpful to us in surveying the field of open data companies?&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In addition to the 20 columns I describe above, there are two columns for
identificatiers. One is the &lt;code&gt;companyId&lt;/code&gt; column, which is the unique
identifier for the particular company. Within the questionnaire, this shows up
inside the URL for the
&lt;a href="http://www.opendata500.com/addData/52eb5431def7fa00029abc8f/"&gt;“New Dataset”&lt;/a&gt;
page.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;http://www.opendata500.com/addData/$companyId/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The other is the &lt;code&gt;datasets&lt;/code&gt; column, which lists identification codes
for datasets (like  151fe3724a03bb3b4c52ae10) and references the
&lt;code&gt;datasetID&lt;/code&gt; column in &lt;code&gt;OD500_Datasets.json&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You can think of this file as a JSON version of &lt;code&gt;Preview50_Companies.csv&lt;/code&gt;.&lt;/p&gt;

&lt;!-- all(unique(sort(preview.csv$CompanyName)) == sort(sapply(candidates.json, function(x){x$companyName}))) --&gt;

&lt;p&gt;Notes:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In some cases, answers to one question are presented redundantly across
 multiple columns.&lt;/li&gt;
  &lt;li&gt;“FTE” probably stands for “full-time equivalent employees”.&lt;/li&gt;
  &lt;li&gt;The questionnaire has different categories from the levels reported in
 this file.&lt;/li&gt;
  &lt;li&gt;This is from the “Personal Information” section, which presumably
 describes the person who is filling out the questionnaire.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id="od500datasetsjson"&gt;OD500_Datasets.json&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.opendata500.com/download/OD500_Datasets.json"&gt;&lt;code&gt;OD500_Datasets.json&lt;/code&gt;&lt;/a&gt;
is a JSON file with an array of associative arrays (that is, a list of mappings).
It has 51 rows (associative ararys) and 
22 columns (items per associative array).
Each row corresponds to a dataset. Three of the columns correspond directly to
questionnaire questions.&lt;/p&gt;

&lt;p&gt;The following columns come from the
&lt;a href="http://www.opendata500.com/addData/52eb5431def7fa00029abc8f/"&gt;“New Dataset”&lt;/a&gt;
page of the questionnaire.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code in the file&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;datasetName&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Name of Dataset&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;datasetURL&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;URL of Dataset&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;source&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Agency or Source&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The file does not include the following columns from the “New Dataset” page.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Code from the web form&lt;/th&gt;
      &lt;th&gt;Question from the questionnaire&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;typeOfDataset&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Type of Dataset (Federal Open Data, State Open Data, City/Local Open Data, Other)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;rating&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;On a scale of 1 to 4, how would you rate the usefulness of this dataset? (1- poor, 4- excellent) Your answer can reflect your experience with data quality, format of the data, or other factors.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;Why did you give it this rating?&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The file also contains two identifier columns. identificatiers.
One is the &lt;code&gt;datasetID&lt;/code&gt; column, which serves as a primary key for this table.
The other is the &lt;code&gt;usedByCompany&lt;/code&gt; column, which references the &lt;code&gt;companyId&lt;/code&gt;
in &lt;code&gt;OD500_Companies.json&lt;/code&gt;,&lt;/p&gt;

&lt;h3 id="preview-html"&gt;preview (HTML)&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.opendata500.com/preview/"&gt;&lt;code&gt;preview&lt;/code&gt;&lt;/a&gt; is an HTML page
containing a non-standard representation of a data table about companies.&lt;/p&gt;

&lt;p&gt;The companies are represented as a nodes with the following XPath.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[1] "//ul[@class=\"m-preview-list\"]/li[@class=\"m-list-company\"]"
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The file contains 51 companies and about 11 fields
(depending on your definition of a field). The fields are approximately
a subset of the fields for &lt;code&gt;Preview50_Companies.csv&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I don’t feel like writing out selectors for every field within each company
node, but you can figure it out by looking at the code for the first company.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;li class="m-list-company"&amp;gt;
&amp;lt;div class="m-list-company-summary"&amp;gt;
&amp;lt;div class="m-preview-list-control"&amp;gt;&amp;lt;span class="m-expand-arrow"/&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;div class="m-preview-list-name"&amp;gt;&amp;lt;strong&amp;gt;Archimedes Inc.&amp;lt;/strong&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;div class="m-preview-list-sectors"&amp;gt;Healthcare&amp;lt;/div&amp;gt;
&amp;lt;div class="m-preview-list-desc"&amp;gt;Archimedes applies quantitative analysis to evidence from clinical trials, epidemiological studies, and other sources to create models that show healthcare decision makers how different options affect outcomes and costs.&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div class="m-list-company-full"&amp;gt;
&amp;lt;div class="m-half"&amp;gt;
&amp;lt;h3&amp;gt;Company Information&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Year Founded:&amp;lt;/strong&amp;gt; 2006&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Location:&amp;lt;/strong&amp;gt; San Francisco, CA&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;FTE:&amp;lt;/strong&amp;gt; 50&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Type of Company:&amp;lt;/strong&amp;gt; Private&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Company Function:&amp;lt;/strong&amp;gt; Data management and analysis&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Category:&amp;lt;/strong&amp;gt; Healthcare&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Source of Revenue: &amp;lt;/strong&amp;gt;Software licensing&amp;lt;/p&amp;gt;
&amp;lt;br/&amp;gt;&amp;lt;a class="m-button" href="/Archimedes-Inc/"&amp;gt;Comment&amp;lt;/a&amp;gt;
&amp;lt;br/&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;div class="m-half"&amp;gt;
&amp;lt;h3&amp;gt;Description:&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Archimedes is a healthcare modeling and analytics organization. With the Archimedes Model at its core, the company enables people to combine real-world healthcare data and simulation data to create compelling and actionable evidence used in individual healthcare decision making, as well as in populations, with applications in health and economic outcomes research, policy creation, and clinical trial design and operations.&amp;lt;/p&amp;gt;
&amp;lt;h3&amp;gt;Social Impact:&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Archimedes solutions help make better decisions about health and healthcare, whether for individuals or populations.&amp;lt;/p&amp;gt;
&amp;lt;h3&amp;gt;Financial Info:&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Not answered by company&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div class="m-full datasets"&amp;gt;
&amp;lt;h3&amp;gt;Datasets&amp;lt;/h3&amp;gt;
&amp;lt;ul&amp;gt;&amp;lt;li&amp;gt;&amp;lt;a href="http://www.cdc.gov/nchs/nhanes.htm"&amp;gt;National Health and Nutrition Examination Survey (NHANES)&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;


&amp;lt;li&amp;gt;&amp;lt;a href="http://www.cdc.gov/nchs/ahcd.htm"&amp;gt;National Ambulatory Medical Care Survey (NAMCS)&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;


&amp;lt;li&amp;gt;&amp;lt;a href="http://www.cdc.gov/nchs/nhds.htm"&amp;gt;National Hospital Discharge Survey (NHDS)&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;


&amp;lt;li&amp;gt;&amp;lt;a href="http://www.cdc.gov/nchs/data_access/cmf.htm"&amp;gt;Compressed Mortality File (CMF)&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;


&amp;lt;/ul&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/li&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I do want to point out the dataset nodes in particular. Each company node lists
zero or more datasets, each with a URL and a title. Here is how you query them.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df &amp;lt;- data.frame(urls = unlist(xpathApply(preview.html[[1]], "div[@class=\"m-list-company-full\"]/div[@class=\"m-full datasets\"]/ul/li/a/@href"), 
    use.names = FALSE), titles = xpathSApply(preview.html[[1]], "div[@class=\"m-list-company-full\"]/div[@class=\"m-full datasets\"]/ul/li/a/text()", 
    xmlValue))
kable(df)
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style="text-align: left"&gt;urls&lt;/th&gt;
      &lt;th style="text-align: left"&gt;titles&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;http://www.cdc.gov/nchs/nhanes.htm&lt;/td&gt;
      &lt;td style="text-align: left"&gt;National Health and Nutrition Examination Survey (NHANES)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;http://www.cdc.gov/nchs/ahcd.htm&lt;/td&gt;
      &lt;td style="text-align: left"&gt;National Ambulatory Medical Care Survey (NAMCS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;http://www.cdc.gov/nchs/nhds.htm&lt;/td&gt;
      &lt;td style="text-align: left"&gt;National Hospital Discharge Survey (NHDS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style="text-align: left"&gt;http://www.cdc.gov/nchs/data_access/cmf.htm&lt;/td&gt;
      &lt;td style="text-align: left"&gt;Compressed Mortality File (CMF)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id="candidates-html"&gt;candidates (HTML)&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.opendata500.com/candidates/"&gt;&lt;code&gt;candidates&lt;/code&gt;&lt;/a&gt; is another HTML page
containing a non-standard representation of a data table about companies.
You can select the companies with the following XPath.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[1] "//div[@class=\"m-candidates isotopes-container\"]/div"
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This file contains 501 companies. To give you a feel
for the schema, the first company is represented like this.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;div class="m-candidates-item  Finance--Investment  NY "&amp;gt;
&amp;lt;a href="/1099is"&amp;gt;&amp;lt;h3&amp;gt;&amp;lt;strong&amp;gt;1099.is&amp;lt;/strong&amp;gt;&amp;lt;/h3&amp;gt;&amp;lt;/a&amp;gt;
&amp;lt;p class="m-homepage-list-location"&amp;gt; New York&amp;lt;/p&amp;gt;
&amp;lt;em&amp;gt; Finance &amp;amp;amp; Investment&amp;lt;/em&amp;gt;
&amp;lt;p class="m-homepage-list-desc"&amp;gt;1099.is helps people navigate the confusing tax code that applies to the self-employed, providing advice from experts and people who have been through this before in transparent, clear, simple language.&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I’d say that this file contains seven fields. Four of them are direct
questionnaire questions.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;XPath within the company node&lt;/th&gt;
      &lt;th&gt;Questionnaire question or meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;a/h3/strong/text()&lt;/td&gt;
      &lt;td&gt;Name of your company&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;p[@class=”m-homepage-list-location”]/text()&lt;/td&gt;
      &lt;td&gt;In which city is this company located?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;em/text()&lt;/td&gt;
      &lt;td&gt;Which best describes the function of your company?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;p[@class=”m-homepage-list-desc”]/text()&lt;/td&gt;
      &lt;td&gt;As a summary, please provide a one sentence description of your company.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Three of them are not.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;XPath within the company node&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;contains(@class, “preview-company”)&lt;/td&gt;
      &lt;td&gt;Is the company part of the “Preview” companies?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;contains(@class, “survey-company”)&lt;/td&gt;
      &lt;td&gt;Did the company submit the questionnaire, or were its data collected by undocumented means?&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;a/@href&lt;/td&gt;
      &lt;td&gt;Link to a page on the Open Data 500 site with more information from the questionnaire about the company&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id="loading-into-r"&gt;Loading into R&lt;/h2&gt;
&lt;p&gt;You can load the data into R like so.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;system('npm install r-open-data-500')
library(nprm)
open.data.500 &amp;lt;- nprm.require('open-data-500')
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you haven’t installed &lt;a href="https://github.com/tlevine/nprm"&gt;nprm&lt;/a&gt;,
install it like so.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;library(devtools)
install_github('nprm','tlevine')
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you don’t want to use nprm, you can manually download
&lt;a href="https://raw.github.com/tlevine/open-data-500/master/main.r"&gt;this script&lt;/a&gt;&lt;/p&gt;

&lt;h2 id="distintion-between-the-preview-and-the-candidates"&gt;Distintion between the “Preview” and the “Candidates”&lt;/h2&gt;
&lt;p&gt;The Open Data 500 Team released an
“&lt;a href="http://www.opendata500.com/preview/"&gt;in-depth view&lt;/a&gt;” of “50 of the first
to complete [the] survey”. They also released a
“&lt;a href="http://www.opendata500.com/candidates/"&gt;full list&lt;/a&gt;” of
“500 candidate companies”.&lt;/p&gt;

&lt;p&gt;I explained earlier that some data were collected through a questionnaire
and that others were collected through an undocumented process. The “preview”
companies are the ones for which the data were collected by questionnaire;
the “candidates” include both these companies and the companies whose data
were collected by the undocumented means. Here’s how I figured that out.&lt;/p&gt;

&lt;h3 id="are-they-just-the-companies-that-have-submitted-questionnaires"&gt;Are they just the companies that have submitted questionnaires?&lt;/h3&gt;
&lt;p&gt;The preview companies are simply all of the companies that have
submitted the questionnaire; the non-preview companies are companies for
which the the Open Data 500 team effectively filled out the questionnaire.&lt;/p&gt;

&lt;p&gt;I came to that conclusion by looking at the following plot. In this plot,
the height of the bars represents the number of companies in a particular
category. The left category is companies that have completed the questionnaire,
and the right category is companies that haven’t. (The Open Data 500 Team
collect information about the companies but not through a questionnaire.)
The datasets are also color-coded based on whether the companies are included
in the Preview set.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/preview_v_candidates.png" alt="Preview companies are questionnaire responses" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Note that the entire left bar is blue and the entire right bar is red;
this means that all of the survey companies are in the preview set and
that none of the non-survey companies are in the preview set.&lt;/p&gt;

&lt;p&gt;Well maybe. Given what I’m about to say in the next section, I’m starting
to wonder whether there was a mistake in the HTML version.&lt;/p&gt;

&lt;h2 id="which-companies-are-in-the-preview"&gt;Which companies are in the preview?&lt;/h2&gt;
&lt;p&gt;I still haven’t resolved which companies are considered to be the preview
companies.&lt;/p&gt;

&lt;h3 id="companies"&gt;51 companies?&lt;/h3&gt;
&lt;p&gt;Three of the files (&lt;code&gt;Preview50_Companies.csv&lt;/code&gt;, &lt;code&gt;OD500_Companies.json&lt;/code&gt;,
and &lt;code&gt;preview&lt;/code&gt;) agree as to which companies are in the preview.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;all(setequal(preview.companies.csv, preview.companies.json), setequal(preview.companies.csv, 
    preview.companies.preview.html))
## [1] TRUE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;According to those three files, the following
51 companies are in the preview.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; [1] "Archimedes Inc."          "Azavea"                  
 [3] "BillGuard"                "BuildZoom"               
 [5] "Calcbench, Inc."          "Captricity"              
 [7] "Civinomics"               "Climate Corporation"     
 [9] "Construction Monitor LLC" "Consumer Reports"        
[11] "Energy Points, Inc."      "Energy Solutions Forum"  
[13] "Enigma.io"                "Esri"                    
[15] "FarmLogs"                 "Fastcase"                
[17] "GreatSchools"             "HDScores, Inc"           
[19] "Healthgrades"             "HealthPocket, Inc."      
[21] "HelloWallet"              "iTriage"                 
[23] "Lawdragon"                "LegiNation, Inc."        
[25] "Lucid"                    "MapBox"                  
[27] "Mercaris"                 "New Media Parents"       
[29] "Ontodia, Inc"             "OpportunitySpace, Inc."  
[31] "Overture Technologies"    "Owler"                   
[33] "Panjiva"                  "Personal, Inc."          
[35] "PolicyMap"                "Quertle"                 
[37] "Science Exchange"         "SeeClickFix"             
[39] "Simple Energy"            "Socrata"                 
[41] "SolarList"                "SpotCrime"               
[43] "Stormpulse"               "StreetCred Software, Inc"
[45] "Symcat"                   "Synthicity"              
[47] "TagniFi"                  "Trulia"                  
[49] "Walk Score"               "Way Better Patents"      
[51] "Brightscope"
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id="companies-1"&gt;100 companies?&lt;/h3&gt;
&lt;p&gt;The remaining file, &lt;code&gt;candidates&lt;/code&gt;, agrees that the above companies are in
the preview,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;setequal(intersect(preview.companies.candidates.html, preview.companies.csv), 
    preview.companies.csv)
## [1] TRUE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;but it includes 49  additional companies, for a total of 100.&lt;/p&gt;

&lt;h3 id="companies-2"&gt;50 companies?&lt;/h3&gt;
&lt;p&gt;There is even a third conflicting concept of the preview!
Several articles indicate that there are 50 companies in the preview,
not 51 nor 100.&lt;/p&gt;

&lt;p&gt;The introduction to the &lt;a href="http://www.opendata500.com/preview/"&gt;&lt;code&gt;preview&lt;/code&gt;&lt;/a&gt; page says
“[t]hese companies are 50 of the first to complete our survey for the Open Data 500”.
The &lt;a href="http://www.opendata500.com/download/"&gt;download&lt;/a&gt; page calls the preview
files “List[s] of 50”. The &lt;a href="http://www.opendata500.com/"&gt;home page&lt;/a&gt; says that the
preview is the “list of the first 50 companies that have filled out our survey”.&lt;/p&gt;

&lt;p&gt;The various press coverage also counts the preview companies at 50.
The article in
&lt;a href="http://www.forbes.com/sites/bethsimonenoveck/2014/01/08/from-faith-based-to-evidence-based-the-open-data-500-and-understanding-how-open-data-helps-the-american-economy/"&gt;Forbes&lt;/a&gt;
says “We’ve also posted in-depth profiles of 50 of them”.
The &lt;a href="http://www.informationweek.com/government/open-government/open-government-data-companies-cash-in/d/d-id/1113143"&gt;Information Week&lt;/a&gt; article
says that “[i]n addition to publishing a list of 500 open data companies,
GovLab also published profiles of 50 companies creating value from open government data.”
And the &lt;a href="http://fedscoop.com/open-data-500-intersection-open-data-economy/"&gt;Fedscoop&lt;/a&gt; article
talks about “50 companies profiled for early release”.&lt;/p&gt;

&lt;h2 id="which-companies-are-the-candidates"&gt;Which companies are the candidates?&lt;/h2&gt;
&lt;p&gt;There are also slight conflicts as to what the full list of companies is.&lt;/p&gt;

&lt;h3 id="what-the-data-files-say"&gt;What the data files say&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;500_Companies.csv&lt;/code&gt; contains 503 companies, and
&lt;code&gt;candidates&lt;/code&gt; contains 501 companies.
Collectively, they list 505 different
companies, and they agree about 498 of these 505 companies.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;csv &amp;lt;- cset(sub(" *$", "", candidates.csv$CompanyName))
html &amp;lt;- cset(sub(" *$", "", as.character(candidates.html$name)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;These are in the CSV but not in the HTML.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print(cset_difference(csv, html))
## {"Bureau Blank", "Capital Access Network", "DocGraph Journal",
##  "Opower", "Spikes Cavell"}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;These are in the HTML but not in the CSV.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;print(cset_difference(html, csv))
## {"CAN Capital", "Roadify", "Spikes Cavell Analytic Inc"}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id="what-the-descriptions-in-english-say"&gt;What the descriptions in English say&lt;/h3&gt;
&lt;p&gt;Much of the Open Data 500 website references a list of 500 companies.
The &lt;a href="http://www.opendata500.com/download"&gt;download page&lt;/a&gt; refers to
&lt;a href="http://www.opendata500.com/download/500_Companies.csv"&gt;&lt;code&gt;500_Companies.csv&lt;/code&gt;&lt;/a&gt;
as the “List of 500 Candidates”. And the three news articles linked from
the homepage also reference a list of 500 companies.&lt;/p&gt;

&lt;h2 id="ness"&gt;500-ness&lt;/h2&gt;
&lt;p&gt;I’m still unsure as to what the “500” in the title means.
As we saw above, it might have something to do with the number of responses,
but I find it odd that someone would name a study after its sample size.
So there’s probably more to it.&lt;/p&gt;

&lt;h3 id="fortune-500"&gt;Fortune 500?&lt;/h3&gt;
&lt;p&gt;Many people have suggested that the name is allusion to
&lt;a href="http://en.wikipedia.org/wiki/Fortune_500"&gt;Fortune 500&lt;/a&gt;,
but I don’t think that’s it.
The Fortune 500 is list of “the top 500 U.S. closely held and public
corporations as ranked by their gross revenue after adjustments”. That is,
it’s the 500 biggest U.S. companies for a particular definition of “big”.&lt;/p&gt;

&lt;p&gt;The Fortune 500 and the Open Data 500 are both about U.S. companies, but
the similarities stop there; as explained on the
“&lt;a href="http://www.opendata500.com/about/#about-results"&gt;About&lt;/a&gt;” page,
the Open Data 500 is explicitly not a ranking and not about company size.&lt;/p&gt;

&lt;h3 id="number-of-responses"&gt;Number of responses?&lt;/h3&gt;
&lt;p&gt;The website says that the Open Data 500 is a list of 500 companies, so it
might be that the “500” refers to the number of companies that they listed.
As I said above, naming studies after their sample size is a bit odd.
It seems like they continued looking for companies until they came up with
500, but I don’t understand why they chose the number 500.&lt;/p&gt;

&lt;p&gt;The Open Data 500 website &lt;a href="http://www.opendata500.com/about/#about-results"&gt;says&lt;/a&gt;
that “the Open Data 500 study is not meant to provide information for definitive
statistical analysis”, so I doubt they did anything like a power analysis to
determine how many they needed.&lt;/p&gt;

&lt;p&gt;One member of the Team told me that this was just a big number as a challenge
to themselves. Another told me that they expected, based on Joel Gurin’s
network, that there were about 500 companies that would respond.&lt;/p&gt;

&lt;h2 id="key-points-and-recommendations"&gt;Key points and recommendations&lt;/h2&gt;
&lt;p&gt;That was a lot of details of the Open Data 500 data. Let’s see if I can
summarize my conclusions about the structure of the study and the data.&lt;/p&gt;

&lt;h3 id="two-sub-studies"&gt;Two sub-studies&lt;/h3&gt;
&lt;p&gt;The Open Data 500 Team is assembling two lists.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The shorter list&lt;/strong&gt; (called the “preview” or the “list of 50”) is the
results of a questionnaire, with one response per company. This part is
a straightforward questionnaire-based case study, and the data that get
released come directly from the questionnaires.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The longer list&lt;/strong&gt; (called the “list of 500 candidates”) makes more sense
if you think about it as the sum of two lists; some of the companies come from
the shorter list (the questionnaire responses), and the rest (most) come from
an undocumented process.&lt;/p&gt;

&lt;h3 id="which-data-files-you-should-use"&gt;Which data files you should use&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;If you are interested in the questionnaire results&lt;/strong&gt;, I recommend using the
&lt;a href="http://www.opendata500.com/download/Preview50_Companies.csv"&gt;&lt;code&gt;Preview50_Companies.csv&lt;/code&gt;&lt;/a&gt;
file; this file is structured more simply than the corresponding JSON files
(&lt;a href="http://www.opendata500.com/download/OD500_Companies.json"&gt;&lt;code&gt;OD500_Companies.json&lt;/code&gt;&lt;/a&gt;
and &lt;a href="http://www.opendata500.com/download/OD500_Datasets.json"&gt;&lt;code&gt;OD500_Datasets.json&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;If you are interested in the long list&lt;/strong&gt;, choose your data file based on the
fields you want and based on whether you want the full list or an incomplete list.
The two files contain different columns; for example, the flag as to whether the
data come from the questionnaire or the undocumented process is only available
in the HTML version,
and the link to the company website is only available in the CSV version.
Thus, you need to choose the file based on which fields you need.
Also, each of these files contains different companies; if you want to have the
full list of companies, you need to combine these files, removing duplicates.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;I’ve already loaded the data into R&lt;/strong&gt;, so look
&lt;a href="#loading-into-r"&gt;here&lt;/a&gt; if you want that.&lt;/p&gt;

&lt;h3 id="other-confusing-things"&gt;Other confusing things&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;The “500” in “Open Data 500” doesn’t mean anything&lt;/strong&gt; as far as I can tell;
it’s not the number of responses, and it’s not a reference to the Fortune 500.
Don’t let this confuse you.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The Open Data 500 is considered “comprehensive” because of its sampling strategy&lt;/strong&gt;,
which is termed “comprehensive call”. This strategy is a form of convenience sampling.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The Open Data 500 is only at data collection stage&lt;/strong&gt;; the “analysis”
component of the study has yet to begin. But the data are already being
released, so you can start analyzing the data before the Open Data 500
Team does!&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The different data files present conflicting versions of the data&lt;/strong&gt;,
and I haven’t figured out how to resolve this.
The different data files do largely agree with each other,
so they should be okay for prototyping your analyses, but you should contact the
Open Data 500 Team for clarification if this starts to matter.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-27:/!/better-datasets-about-open-data/index.html</id>
    <title type="html">Organizing my data about data</title>
    <published>2014-01-27T00:00:00Z</published>
    <updated>2014-01-27T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/better-datasets-about-open-data/index.html"/>
    <content type="html">&lt;p&gt;I’ve recently been &lt;a href="/open-data"&gt;studying data about open data&lt;/a&gt;,
and I want to make it easy for other people to use my data data for more
data data studies.
I previously &lt;a href="/!/my-datasets-about-open-data"&gt;documented&lt;/a&gt;
much of the data data that I’d collected, but that was all a mess,
so I’ve been organizing them a bit more nicely. All of the old stuff
still applies, but stuff I do in the near future will follow the
presently document structure.&lt;/p&gt;

&lt;h2 id="getting-the-code"&gt;Getting the code&lt;/h2&gt;
&lt;p&gt;I’m trying to put all programs for accessing the data data into a single git
repository &lt;a href="https://github.com/tlevine/open-data"&gt;hosted on GitHub&lt;/a&gt;.
Get it like so.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git clone git@github.com:tlevine/open-data.git --recursive
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You need &lt;code&gt;--recursive&lt;/code&gt; because
there are separate submodules for different data data sources.&lt;/p&gt;

&lt;h2 id="running-things"&gt;Running things&lt;/h2&gt;
&lt;p&gt;Most of the directions for downloading stuff from other places are written as
Python modules and are stored in the root of the repository. I intend for
&lt;code&gt;run.py&lt;/code&gt; to be the entry point to all of these modules. In some cases,
however, I copied a file from another place and didn’t integrate it into this
structure.&lt;/p&gt;

&lt;p&gt;Don’t expect things to be particularly well documented, but you can try to
figure out what I did by looking in the Makefile.
Most of the make tasks involve importing the &lt;code&gt;run.py&lt;/code&gt; file and
running one of the functions in it.&lt;/p&gt;

&lt;h2 id="directory-structure"&gt;Directory structure&lt;/h2&gt;
&lt;p&gt;The root of the repository contains five directories.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ git ls-files|sed -n 's/\/.*//p'|uniq
downloads
instances.ckan.org
opendata.socrata.com
reports
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;instances.ckan.org&lt;/code&gt; and &lt;code&gt;opendata.socrata.com&lt;/code&gt; directories contain one
webpage file each. These files contain lists of data catalogs.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;downloads&lt;/code&gt; directory contains a few git submodules, and most of the 
stuff that gets downloaded winds up in these submodules.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;reports&lt;/code&gt; directory contains lots of English and R rather than Python.
Each report has an R script (named something &lt;code&gt;.r&lt;/code&gt;) that renders an Rmarkdown
file (named something &lt;code&gt;.Rmd&lt;/code&gt;). There are other small files too, but I don’t
have a system as to why they go where they do.&lt;/p&gt;

&lt;p&gt;Some of the scripts produce a &lt;code&gt;./cache&lt;/code&gt; directory.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ls -d */
cache/  downloads/  instances.ckan.org/  opendata.socrata.com/  reports/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The function of this directory is explained later.&lt;/p&gt;

&lt;h2 id="loading-cached-data"&gt;Loading cached data&lt;/h2&gt;
&lt;p&gt;On all of the computers that I might run this code on, I store the &lt;code&gt;/tmp&lt;/code&gt; 
directory on RAM.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ df -h|sed -n -e 1p -e '/\/tmp$/p'
Filesystem      Size  Used Avail Use% Mounted on
tmpfs           7.8G  1.3G  6.6G  16% /tmp
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To make things run faster, I use &lt;code&gt;/tmp/open-data.sqlite&lt;/code&gt; to store caches that
I can lose. Run &lt;code&gt;make to-disk&lt;/code&gt; to copy this file to the &lt;code&gt;./cache&lt;/code&gt; directory, 
and run &lt;code&gt;make from-disk&lt;/code&gt; to copy &lt;code&gt;./cache/open-data.sqlite&lt;/code&gt; to the &lt;code&gt;/tmp&lt;/code&gt; directory.&lt;/p&gt;

&lt;h2 id="documentation"&gt;Documentation&lt;/h2&gt;
&lt;p&gt;If it’s taking you a while to figure out how something works,
&lt;a href="&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#116;&amp;#111;:&amp;#095;&amp;#064;&amp;#116;&amp;#104;&amp;#111;&amp;#109;&amp;#097;&amp;#115;&amp;#108;&amp;#101;&amp;#118;&amp;#105;&amp;#110;&amp;#101;&amp;#046;&amp;#099;&amp;#111;&amp;#109;"&gt;email me&lt;/a&gt;, and I might document it.
And if you figure out how something works, do send me any
documentation that you happen to come up with, even if it’s a mess.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-16:/!/data-catalog-dead-links/index.html</id>
    <title type="html">Dead links on data catalogs</title>
    <published>2014-01-16T00:00:00Z</published>
    <updated>2014-01-16T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/data-catalog-dead-links/index.html"/>
    <content type="html">&lt;p&gt;As I started looking at data on &lt;a href="http://ckan.org/"&gt;CKAN&lt;/a&gt; sites, I noticed that a lot of the
datasets were links to files on other websites and that a lot of these links
were dead. Then I started wondering which links were dead and how this happens.&lt;/p&gt;

&lt;h2 id="why-study-dead-links"&gt;Why study dead links&lt;/h2&gt;
&lt;p&gt;It goes without saying that websites usually shouldn’t have dead links, but
here are a bunch of fancy reasons why dead links shouldn’t be on open data sites.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href="http://sunlightfoundation.com/opendataguidelines/#permanent-access"&gt;Sunlight Foundation&lt;/a&gt;
  says to “Create permanent, lasting access to data”.&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://project-open-data.github.io/principles/"&gt;Project Open Data&lt;/a&gt; says
  that data should be “Managed Post-Release”.&lt;/li&gt;
  &lt;li&gt;The &lt;a href="http://census.okfn.org/faq/#what-do-all-the-questions-about-the-datasets-mean-"&gt;questions&lt;/a&gt;
  for Open Knowledge Foundation’s Open Data Census include
    &lt;ul&gt;
      &lt;li&gt;“Is the data available online?”&lt;/li&gt;
      &lt;li&gt;“URL of data online?”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;The Open Data Institute
  &lt;a href="https://certificates.theodi.org/surveys/gb/ofm6KhncVg/take"&gt;Open Data Certificate questionnaire&lt;/a&gt;
  asks for a bunch of URLs about the dataset to be certified;
  I presume they should be alive.
  It also asks “How long will this data be available for?”&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In summary, dead links are bad.&lt;/p&gt;

&lt;p&gt;That said, if the alternative to having a dead link to a dataset is having no
link to a dataset, I’d say it’s better to have the dead link so we know that the
data exist. But live links are better; let’s move on.&lt;/p&gt;

&lt;h2 id="acquiring-the-data"&gt;Acquiring the data&lt;/h2&gt;
&lt;p&gt;I collected data about dead links from CKAN and
&lt;a href="http://www.socrata.com/open-data-portal/"&gt;Socrata&lt;/a&gt; catalogs;
it went a bit like this.&lt;/p&gt;

&lt;p&gt;&lt;img src="data-collection.png" alt="Diagram of the data collection process" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The next few sections explain this a bit more.&lt;/p&gt;

&lt;h3 id="accessing-data-catalogs"&gt;Accessing data catalogs&lt;/h3&gt;
&lt;p&gt;I downloaded &lt;a href="https://opendata.socrata.com/api/views/6wk3-4ija/rows.json?accessType=DOWNLOAD"&gt;a list of Socrata catalogs&lt;/a&gt;
(&lt;a href="https://github.com/tlevine/open-data/blob/master/opendata.socrata.com/api/views/6wk3-4ija/rows.json%3FaccessType%3DDOWNLOAD"&gt;mirror&lt;/a&gt;)
and &lt;a href="http://instances.ckan.org/config/instances.json"&gt;a list of CKAN catalogs&lt;/a&gt;
(&lt;a href="https://github.com/tlevine/open-data/blob/master/instances.ckan.org/config/instances.json"&gt;mirror&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I tried querying the APIs for all of these sites.
I couldn’t do this for some of the sites, mainly because they required
authorization (lolz open data) that I did not have or because
the URL I found for the catalog did not correspond with the
domain for the CKAN or Socrata API.
I continued with all of the sites for which I could get the data;
this wound up being
44 CKAN catalogs and
52 Socrata catalogs.&lt;/p&gt;

&lt;h3 id="dataset-metadata"&gt;Dataset metadata&lt;/h3&gt;
&lt;p&gt;With each of these catalogs, I acquired the metadata JSON file for each dataset
in the catalog. Here they are for
&lt;a href="https://github.com/tlevine/socrata-views"&gt;Socrata&lt;/a&gt; and for
&lt;a href="https://github.com/tlevine/ckan-datasets"&gt;CKAN&lt;/a&gt;. These are also
&lt;a href="https://github.com/tlevine/open-data/tree/master/downloads"&gt;submodules&lt;/a&gt;
to the &lt;a href="https://github.com/tlevine/open-data/tree/master"&gt;main repository&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id="link-liveliness"&gt;Link liveliness&lt;/h3&gt;
&lt;p&gt;From the metadata for each dataset, I pulled out the
URL
for the dataset if there was a URL.
Here’s the code
for &lt;a href="https://github.com/tlevine/open-data/blob/master/links.py#L13"&gt;Socrata&lt;/a&gt; and
for &lt;a href="https://github.com/tlevine/open-data/blob/master/links.py#L32"&gt;CKAN&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I checked whether datasets were alive by trying to download them.
(&lt;a href="https://github.com/tlevine/open-data/blob/master/links.py#L37"&gt;More precisely&lt;/a&gt;,
I really issued a HEAD request and checked the status code.)&lt;/p&gt;

&lt;h3 id="internal-versus-external-storage"&gt;Internal versus external storage&lt;/h3&gt;
&lt;p&gt;Once I had the metadata files about each dataset, I also
&lt;a href="https://github.com/tlevine/open-data/blob/master/links.py"&gt;determined&lt;/a&gt;
whether the dataset was stored &lt;em&gt;internally&lt;/em&gt; or &lt;em&gt;externally&lt;/em&gt;.
These are terms that I just invented, so I define them below.&lt;/p&gt;

&lt;p&gt;With &lt;strong&gt;internal storage&lt;/strong&gt;, the dataset is uploaded to the data catalog software
itself. In CKAN, the dataset gets stored in the FileStore, and in Socrata,
the dataset gets stored in Socrata’s data storage. (There isn’t really a
name for this place in Socrata’s architecture, as far as I know.)&lt;/p&gt;

&lt;p&gt;With &lt;strong&gt;external storage&lt;/strong&gt;, the dataset is a file that is stored on some other
website on the internet, and we can reference the dataset with a URL. When we
add the dataset to CKAN or Socrata, we are just linking to this other website.&lt;/p&gt;

&lt;p&gt;As I imply above, Socrata and CKAN both support both of these two approaches.&lt;/p&gt;

&lt;h3 id="final-database"&gt;Final database&lt;/h3&gt;
&lt;p&gt;I combined this all into the same
&lt;a href="http://bigdada.thomaslevine.com/open-data.sqlite.gz"&gt;SQLite3 file&lt;/a&gt;
as I used for the &lt;a href="/!/socrata-products"&gt;Socrata products analysis&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="results"&gt;Results&lt;/h2&gt;

&lt;h3 id="how-many-data-catalogs-have-external-links"&gt;How many data catalogs have external links?&lt;/h3&gt;
&lt;p&gt;As I mention above, there are
52 Socrata catalogs.
Of these,
19
(37%)
have at least one externally stored dataset.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/has_links_socrata.png" alt="Socrata catalogs with externally stored datasets" /&gt; &lt;/p&gt;

&lt;p&gt;Of the 44 CKAN catalogs,
43
(98%)
have at least one externally stored dataset.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/has_links.png" alt="Proportion of data catalogs with externally stored datasets" /&gt; &lt;/p&gt;

&lt;p&gt;That’s a big difference.&lt;/p&gt;

&lt;h3 id="link-types-and-liveliness-by-catalog"&gt;Link types and liveliness by catalog&lt;/h3&gt;
&lt;p&gt;Rather than looking at just whether there are any externally stored datasets at all,
let’s now look at what proportion of the datasets are stored externally.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/software_all_types.png" alt="Non-links, live links, and dead links across data catalog" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Whether a dataset is stored internally or externally is related to whether it
stays alive. This is a plot of what proportion of datasets on Socrata are stored
internally and what proportion of datasets are alive; each dot is a data catalog
run by Socrata.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/prop_links_socrata.png" alt="Only externally stored data can be dead" /&gt; &lt;/p&gt;

&lt;p&gt;Socrata data catalogs with more externally stored data tend to have more dead links.&lt;/p&gt;

&lt;p&gt;The above plot was for just Socrata; let’s see what happens when we add CKAN.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/prop_links.png" alt="CKAN catalogs have more externally stored datasets and more dead datasets" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;CKAN catalogs tend to have more externally stored data. When we add CKAN, the
association between externally stored data and dead links continues.&lt;/p&gt;

&lt;h3 id="liveliness-among-externally-stored-data"&gt;Liveliness among externally stored data&lt;/h3&gt;
&lt;p&gt;Here’s another way of seeing the above relationship. Let’s look at only the externally
stored datasets, and check what proportion of those are alive.&lt;/p&gt;

&lt;p&gt;&lt;img src="figure/software_only_links.png" alt="Of only the external links, what proportion of datasets are alive?" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Catalogs with no external links appear as empty bars.&lt;/em&gt; This is ambiguous,
because empty bars could also mean that there are external links but they’re
all dead. Oh, well.&lt;/p&gt;

&lt;p&gt;Some data catalogs are better than others, but about a quarter of externally stored
datasets tend to be dead. Thus, when we make more externally stored datasets,
we should expect more dead datasets.&lt;/p&gt;

&lt;p&gt;Possibly interesting: the catalogs in this plot are ordered the same way they
are in the &lt;a href="#link-types-and-liveliness-by-catalog"&gt;earlier similar-looking plot&lt;/a&gt;,
so higher catalogs
are ones with fewer dead links.&lt;/p&gt;

&lt;h2 id="software-suggests-behavior"&gt;Software suggests behavior&lt;/h2&gt;
&lt;p&gt;While both softwares support both storage methods, Socrata encourages the
use of internal storage, and CKAN encourages the use of external storage.
Let’s walk through how you create a dataset in both CKAN and Socrata through
their respective web interfaces.&lt;/p&gt;

&lt;h3 id="ckan"&gt;CKAN&lt;/h3&gt;
&lt;p&gt;In CKAN, this is the screen you get when you are specifying the data file
for your dataset.&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-1.png" alt="&amp;quot;1. Create dataset&amp;quot; page" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The first screen says nothing about how to enter the data, but the second one does.&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-2.png" alt="&amp;quot;2. Additional Data&amp;quot; page" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;You enter the URL of a file or an API,&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-3.png" alt="Filling in the &amp;quot;Resource&amp;quot; field with a &amp;quot;Link to an API&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;or you upload a file.&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-4.png" alt="The &amp;quot;File Upload&amp;quot; file picker window" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;After you upload the file, the box gets populated with the URL to which that
has been uploaded. (This URL is inside the CKAN FileStore.)&lt;/p&gt;

&lt;p&gt;&lt;img src="ckan-5.png" alt="Filling in the &amp;quot;Resource&amp;quot; field with a &amp;quot;Upload a file&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The first two cases lead to external storage, and
the third case leads to internal storage.
CKAN does fancy things depending on whether you say it’s a file or an API
and depending on the file format you tell it, but that’s separate from the
issue of internal versus external storage.&lt;/p&gt;

&lt;p&gt;As you might notice above, CKAN subtly encourages you to store things externally.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;There are two options for external storage but just one for internal.&lt;/li&gt;
  &lt;li&gt;The two tabs for external storage options come before the third tab for
 internal storage.&lt;/li&gt;
  &lt;li&gt;In the web interface, internally stored, uploaded files are treated like
 external links.&lt;/li&gt;
  &lt;li&gt;One of the external storage options (the “Link to a file” tab) is selected
 by default when you arrive at the page.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;CKAN is a bit subtle in encouraging external storage, but do keep this in mind.&lt;/p&gt;

&lt;h3 id="socrata"&gt;Socrata&lt;/h3&gt;
&lt;p&gt;While externally stored data exist on Socrata, I didn’t find any way of creating
such a dataset with the Socrata website. Here’s what creating a new dataset on 
Socrata looks like.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-start.png" alt="&amp;quot;How would you like to create your new Dataset?&amp;quot; page, with three options: &amp;quot;Design from Scratch&amp;quot;, &amp;quot;Import a Data File&amp;quot; and &amp;quot;Upload a Non-Data File&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;If you choose to “Design from Scratch”, you wind up entering the data through
the table interface in Socrata; after you click through a few screens, you get
an editor like this.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-scratch-2.png" alt="A spreadsheet-like table editor in Socrata Open Data Portal software" /&gt;&lt;/p&gt;

&lt;p&gt;If you choose to “Import a Data File”, you see this.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-1.png" alt="&amp;quot;Where is the file located&amp;quot; page, with two options: &amp;quot;On my computer&amp;quot; and &amp;quot;On the internet&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Because I was looking for a place to add externally stored data, I clicked on
“On the Internet”. I entered a file into this box, and the file got downloaded
to Socrata.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-2.png" alt="&amp;quot;Please indicate where your data file lives.&amp;quot;, with a text input box containing the URL &amp;quot;http://chainsaw.thomaslevine.com/aurora.csv&amp;quot;" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;Then I got this schema editor,&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-3.png" alt="Display of column names and types for the uploaded dataset, with buttons for editing the information" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;and the data got imported to the internal storage.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-5.png" alt="The same spreadsheet-like editor as above, but with the aurora.csv data" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;The non-data file approach also leads to internal storage.&lt;/p&gt;

&lt;p&gt;&lt;img src="socrata-non-data.png" alt="&amp;quot;Please choose a file to upload&amp;quot; page that looks nearly identical to the &amp;quot;Where is the file located&amp;quot; page" class="wide" /&gt;&lt;/p&gt;

&lt;p&gt;I don’t even see any documentation as to how to do this
&lt;a href="http://dev.socrata.com/publishers/importing"&gt;with the API&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Socrata Support did send me an
&lt;a href="https://twitter.com/SocrataSupport/status/423600872501690368"&gt;answer&lt;/a&gt;,
but I need to log in to ZenDesk to do that (lolz open data again),
and I was having trouble doing that.&lt;/p&gt;

&lt;p&gt;So it’s pretty hard to add an externally stored dataset to Socrata.&lt;/p&gt;

&lt;h2 id="internal-storage-encourages-live-links"&gt;Internal storage encourages live links&lt;/h2&gt;
&lt;p&gt;If your data are stored in CKAN’s FileStore or in Socrata’s
data storage (rather than as an external link), then it is
practically impossible for the link to be dead.&lt;/p&gt;

&lt;p&gt;If we want to use fancy design-speak, we can call this a forcing function.
A forcing function is an aspect in the design of a thing that makes it
impossible for people to do something that they aren’t supposed to do.
If we make it impossible for links to be dead, they won’t ever be dead.&lt;/p&gt;

&lt;h2 id="other-ways-of-encouraging-live-links"&gt;Other ways of encouraging live links&lt;/h2&gt;
&lt;p&gt;Removing the external link feature should reduce the number of dead links
to zero, and that might be nice. On the other hand, there might be some good
things about external links, so maybe we can instead come up with some other
software feature that helps people avoid or fix dead links. For example,
perhaps there could be a page that lists the dead datasets and counts how
many times people have tried accessing them.&lt;/p&gt;

&lt;p&gt;The &lt;a href="https://github.com/okfn/ckanext-qa"&gt;CKAN Quality Assurance Extension&lt;/a&gt;
does just this; here’s one of its reports.&lt;/p&gt;

&lt;p&gt;&lt;a href="http://data.gov.uk/data/reports/qa/organisation/broken_resource_links/her-majestys-revenue-and-customs"&gt;&lt;img src="ckanext-qa.png" alt="A table of datasets with statistics about how dead they are" class="wide" /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id="why-measure-data-catalogs"&gt;Why measure data catalogs&lt;/h2&gt;
&lt;p&gt;Detecting dead links is one of several things that we can easily do to
measure the quality of a data catalog. Similarly, we can also measure
&lt;a href="/!/open-data-licensing"&gt;what licenses are used&lt;/a&gt;,
&lt;a href="/!/data-updatedness"&gt;how up-to-date the data are&lt;/a&gt;,
and &lt;a href="/!/socrata-formats"&gt;what data formats the data are in&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When we have lots of datasets on our data catalog, it becomes too much
for someone to read through all of them. Measures like these help us get
some idea of what is going on across the data catalog. They also help us
choose where to focus our attention, so that we may identify good
practices and diagnose problems.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-09:/!/nyc-crime-map/index.html</id>
    <title type="html">NYC Crime Map Data API</title>
    <published>2014-01-09T00:00:00Z</published>
    <updated>2014-01-09T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/nyc-crime-map/index.html"/>
    <content type="html">&lt;p&gt;People have been complaining a lot about how you can’t get the raw data out of this
&lt;a href="http://maps.nyc.gov/crime/"&gt;NYC Crime Map&lt;/a&gt;. I don’t know what they’re talking about.
Here are the data, as two geojson files.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href="http://chainsaw.thomaslevine.com/nyc-crime-data/02378420399528461352-17772055697785505571.geojson"&gt;Separated by crime type&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://chainsaw.thomaslevine.com/nyc-crime-data/02378420399528461352-11853667273131550346.geojson"&gt;Totals across crime types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Read on to see how I got these files.&lt;/p&gt;

&lt;h2 id="api-for-the-data"&gt;API for the data&lt;/h2&gt;
&lt;p&gt;Go to the crime map, and look at the network requests that are being made.
You’ll see a bunch of calls to the Google Maps Engine API.&lt;/p&gt;

&lt;p&gt;&lt;img src="firefox.png" alt="A network request in the console in Firefox" /&gt;&lt;/p&gt;

&lt;p&gt;Look at one of them, and you’ll see the exact query that is being made.&lt;/p&gt;

&lt;p&gt;&lt;img src="request-window.png" alt="A window with more information about the request" /&gt;&lt;/p&gt;

&lt;p&gt;It’s calling the
&lt;a href="https://developers.google.com/maps-engine/documentation/reference/v1/tables/features"&gt;Tables.features&lt;/a&gt;
endpoint of the Google Maps Engine API.&lt;/p&gt;

&lt;p&gt;Here’s the function I wrote for calling that endpoint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def table_features(table_id, select, where = None, maxResults = 1000, pageToken = None):
    url = 'https://www.googleapis.com/mapsengine/v1/tables/%s/features/' % table_id

    params = {
        'key': KEY,
        'version': 'published',
        'maxResults': maxResults,
        'select': select,
    }
    if where:
        params['where'] = where
    if pageToken:
        params['pageToken'] = pageToken

    headers = {
        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Firefox/24.0',
        'Referer':  'http://maps.nyc.gov/crime/',
    }

    r = requests.get(url, headers = headers, params = params)
    return r
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="two-tables"&gt;Two tables&lt;/h2&gt;
&lt;p&gt;The data are stored in two tables.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;02378420399528461352-11853667273131550346&lt;/li&gt;
  &lt;li&gt;02378420399528461352-17772055697785505571&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The latter of these tables contains a “CR” field for the crime type;
the former does not. I presume that the former has one row per location
and that the latter has one row per crime type per location,
but I haven’t checked.&lt;/p&gt;

&lt;h2 id="table-schema"&gt;Table schema&lt;/h2&gt;
&lt;p&gt;You can supposedly get the table schema with the
&lt;a href="https://developers.google.com/maps-engine/documentation/reference/v1/tables/get"&gt;Tables&lt;/a&gt;
endpoint, but the &lt;code&gt;key&lt;/code&gt; doesn’t seem to give us access to that.
Here’s the function I wrote to call the Tables endpoint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;def table(table_id):
    '''
    This would tell us the schema, among other things.
    https://developers.google.com/maps-engine/documentation/reference/v1/tables#resource
    '''

    url = 'https://www.googleapis.com/mapsengine/v1/tables/%s/' % table_id
    params = {
        'key': KEY,
    }
    headers = {
        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Firefox/24.0',
        'Referer':  'http://maps.nyc.gov/crime/',
    }
    r = requests.get(url, headers = headers, params = params)
    return r
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now I try to run it.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import crime
r = crime.table('02378420399528461352-17772055697785505571')
print(r.text)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And here’s the result.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can see some of the columns in the crime map JavaScript code, but there
might be columns in the table that aren’t exposed in the crime map website.&lt;/p&gt;

&lt;h2 id="getting-the-data-as-geojson"&gt;Getting the data as GeoJSON&lt;/h2&gt;
&lt;p&gt;I downloaded the full tables from the Google Maps Engine API,
so now you can download them as ordinary GeoJSON files, one per table.
Read more &lt;a href="https://github.com/tlevine/nyc-crime-map"&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="more-seriously"&gt;More seriously&lt;/h2&gt;
&lt;p&gt;While everyone has permission to download these data, I do know that getting
them seems impossible to some people. It’s funny, though, that it has taken
me so long to do something so simple.&lt;/p&gt;

&lt;p&gt;It usually takes quite a lot to convince me that something might be vaguely
useful. People complained a bunch about this map, so I finally got the
data into a nicer form, but I’m still skeptical that it’s really useful at all.&lt;/p&gt;

&lt;p&gt;So please convince me that I didn’t just waste two hours.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.thomaslevine.com,2014-01-01:/!/making-your-personal-website/index.html</id>
    <title type="html">How to make a personal website, in 9001 easy steps</title>
    <published>2014-01-01T00:00:00Z</published>
    <updated>2014-01-01T00:00:00Z</updated>
    <link rel="alternate" href="http://www.thomaslevine.com/!/making-your-personal-website/index.html"/>
    <content type="html">&lt;p&gt;Making your own personal website might seem daunting, but
it’s not hard if you break it into smaller steps.&lt;/p&gt;

&lt;h2 id="recording-your-works"&gt;Recording your works&lt;/h2&gt;
&lt;p&gt;Start recording everything worth recording. Write
it down, take video, or whatever. It doesn’t matter how
you do it or how you organize things; just record things
while you still remember them, and store them in a place
you won’t lose them. (Email attachments are perfectly
acceptable.)&lt;/p&gt;

&lt;p&gt;Before I had a good system, I stored things in email
attachments, Google Docs, hard drives, Gitorious (git
repositories), Tumblr, SmugMug, S3, Twitter, Facebook,
a CouchDB, and in a 60-page book written in LaTeX.
I probably used other places too.&lt;/p&gt;

&lt;p&gt;&lt;small&gt;Fun fact: I named my 60-page book &lt;em&gt;The Dump&lt;/em&gt;, after
Maurice Benayoun’s &lt;a href="http://www.the-dump.net/"&gt;The Dump&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;The main thing is to get everything digital so that you can
carry the stuff around and search through it easily.&lt;/p&gt;

&lt;h2 id="write-about-your-stuff"&gt;Write about your stuff&lt;/h2&gt;
&lt;p&gt;You probably want to write a little something about each thing.
At the very least, you probably want to give them a title.
A paragraph and a date might be good too.&lt;/p&gt;

&lt;p&gt;I wrote these descriptions all over the place, but a lot were
as captions on SmugMug. This was sort of a good idea, but only
because I was uploading lots of pictures to SmugMug. The point
is that you don’t need to have a fancy website before you can
create content for the website.&lt;/p&gt;

&lt;p&gt;Also, &lt;strong&gt;don’t proofread&lt;/strong&gt;. Well, more accurately, only proofread
after you’ve posted something on the internet and a few hundred
people have read it and complimented you on it. Nobody is ever
going to see most of your stuff, so don’t waste time on making
it good.&lt;/p&gt;

&lt;h2 id="organizing-your-works"&gt;Organizing your works&lt;/h2&gt;
&lt;p&gt;Nobody other than you is going to read your website once
you have it, at least at first, so don’t worry about
designing it for other people. In fact, you don’t even need
a website; just come up with some system that makes it
easy for you to find the things you’ve recorded. I’ll
divide my approach to this into two categories.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Making a list&lt;/li&gt;
  &lt;li&gt;Organizing files into a standard structure&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id="make-a-list"&gt;Make a list&lt;/h3&gt;
&lt;p&gt;If you’ve been using email attachments to store your works,
you could just list the names of the works and search terms
that will find them. I actually didn’t do this, but the point
is that it doesn’t have to be fancy.&lt;/p&gt;

&lt;p&gt;I had already been doing this to some degree as I was recording
things in my 60-page LaTeX book and in my SmugMug galleries.&lt;/p&gt;

&lt;p&gt;Most of everything else was already publically accessible on the web,
so I mostly made a list of all of the links to them. I did this
as a &lt;a href="https://github.com/tlevine/www.thomaslevine.com/blob/c1e1302b2fe43bbe98902a08367bb4d01feea66e/content/index.html"&gt;webpage&lt;/a&gt;,
but you could do it in an email or blog post or whatever.&lt;/p&gt;

&lt;h3 id="make-a-consistent-file-structure"&gt;Make a consistent file structure&lt;/h3&gt;
&lt;p&gt;For anything you have been storing as ordinary files, copy the
files into a new place with standard naming conventions.
I suggest the following structure.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;things-i-did/name-of-thing/file-about-thing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For example,&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;things-i-did/middle-names/askcensus.eml
things-i-did/middle-names/cornell_middle_names_by_school.png
things-i-did/middle-names/us_middle_names_over_time_by_state.pdf
things-i-did/middle-names/us_middle_names_over_time.png
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Don’t worry yet about writing the web page about it.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/tlevine/thomaslevine.com/tree/master/hack/blog"&gt;Here&lt;/a&gt;’s
me putting the things into directories before I was using my current
website-generator system.&lt;/p&gt;

&lt;h2 id="make-a-simple-website"&gt;Make a simple website&lt;/h2&gt;
&lt;p&gt;You wanted a website, so start putting stuff up on the web
in whatever way is easy.&lt;/p&gt;

&lt;p&gt;I wound up with a list of links before I had nicely
structured files, so I just put that up. It went through
many incarnations, but here are a few.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A bunch of files that I edited manually&lt;/li&gt;
  &lt;li&gt;SmugMug photo gallery thing&lt;/li&gt;
  &lt;li&gt;More files that I edited manually&lt;/li&gt;
  &lt;li&gt;Pages generated from that 60-page LaTeX book with
  &lt;a href="http://hevea.inria.fr/"&gt;HeVeA&lt;/a&gt; and a hacky shell script&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you have nicely structured files and no other list, you
could just dump them on a plain Apache web server,
like &lt;a href="http://chainsaw.thomaslevine.com/"&gt;this&lt;/a&gt;.
I suspect there’s even some fancy easy-to-use
drag-files-somewhere-and-have-them-magically-served thing.&lt;/p&gt;

&lt;p&gt;I got this idea while talking with
&lt;a href="http://cooperation.io/"&gt;Marina&lt;/a&gt;.
Her site is a bunch of files served by a
&lt;a href="https://gist.github.com/mk30/8210642"&gt;wonderfully sloppy script&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="make-a-fancy-website"&gt;Make a fancy website&lt;/h2&gt;
&lt;p&gt;By now, you have a lot of nicely organized content on the web.
This is still not quite what you want; the following things
could be improved.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You want it to be easy for you to add new material to the
  website.&lt;/li&gt;
  &lt;li&gt;You want the website to look pretty.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now that you have a bunch of content, you can play around with
a few different ways of arranging them fancy-like. So many
possibilities! Here are two main things to think about.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;How to add new content&lt;/li&gt;
  &lt;li&gt;How to manage the whole system&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Don’t worry about making it pretty or easy for other people to use.&lt;/p&gt;

&lt;h3 id="how-do-you-like-to-add-new-content"&gt;How do you like to add new content?&lt;/h3&gt;
&lt;p&gt;I like working with ordinary files, so I make new webpages by
making new files inside of a terminal. But you might prefer to
use a word processor on a website or to take videos with your phone.&lt;/p&gt;

&lt;h3 id="how-can-you-make-this-whole-system-easy-to-manage"&gt;How can you make this whole system easy to manage?&lt;/h3&gt;
&lt;p&gt;Lots of
things could go wrong when things get fancy like this. Pay attention
to things that seem annoying, and come up with ways around this.
Annoying things might include&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Maintaining whatever server you have&lt;/li&gt;
  &lt;li&gt;The process for uploading new files to the site&lt;/li&gt;
  &lt;li&gt;Having the appropriate software to edit your site&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Try to keep this fancy system simple. When it has to be complicated,
let the complicated things be either things you already understand
well or things that you’ll learn quickly.&lt;/p&gt;

&lt;h2 id="my-particular-website"&gt;My particular website&lt;/h2&gt;
&lt;p&gt;You probably want a website that isn’t exactly like mine, but it
might be worth explaining how my website works right now. If you’re
not the sort of person who knows what text files and Git are,
you might want to &lt;a href="#repeat"&gt;skip this section&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id="copying-it"&gt;Copying it&lt;/h3&gt;
&lt;p&gt;But before I explain any further, I would like to note that
you are welcome to base your website on mine; the source code
is &lt;a href="https://github.com/tlevine/www.thomaslevine.com"&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The process for editing it is designed very specifically for me,
so you might not like it. Also, it is not very well documented,
but if you’re having trouble figuring out how it works, write to
me, and I’ll document it better.&lt;/p&gt;

&lt;p&gt;If you want to use it, start by keeping all of the logic the same
and just changing things in the &lt;code&gt;content/!&lt;/code&gt; directory and in the
&lt;code&gt;content/index.haml&lt;/code&gt; file. Get something working, and worry later
about making it look pretty.&lt;/p&gt;

&lt;h3 id="notable-featurues"&gt;Notable featurues&lt;/h3&gt;
&lt;p&gt;If you don’t want to use it, you still might take some inspiration
from some of the decisions I made&lt;/p&gt;

&lt;h4 id="static-website-generator"&gt;Static website generator&lt;/h4&gt;
&lt;p&gt;My website doesn’t have anything where people log in or upload files
or otherwise send input to the server. Thus, I can serve my website
as ordinary files.&lt;/p&gt;

&lt;p&gt;Editing these files is annoying, so I use a static website generator that writes these files based on the simpler and less-annoying files
with which I configure my website. I happen to use
&lt;a href="http://nanoc.ws/"&gt;nanoc&lt;/a&gt;, but there are tons of them.&lt;/p&gt;

&lt;h4 id="git"&gt;Git&lt;/h4&gt;
&lt;p&gt;It scares me to edit things without tracking their history. I settled
a few years ago on using &lt;a href="http://git-scm.com"&gt;Git&lt;/a&gt; for this, so that’s
what I use for versioning the all of the content on my website.
(I’m right now making a distinction between content and logic.)&lt;/p&gt;

&lt;p&gt;When I build the site with nanoc, the resulting files go into the
&lt;code&gt;output&lt;/code&gt; directory, and then I upload them to a static file hosting
service (more on that later).&lt;/p&gt;

&lt;p&gt;This &lt;code&gt;output&lt;/code&gt; directory is a
&lt;a href="http://git-scm.com/book/en/Git-Tools-Submodules"&gt;git submodule&lt;/a&gt;
with just the resulting website. This is cool in case I ever can’t
get nanoc working in the future; even if I can’t rebuild the site,
I’ll be able to see what old versions looked like.&lt;/p&gt;

&lt;h4 id="git-remotes"&gt;Git remotes&lt;/h4&gt;
&lt;p&gt;It also scares me to edit things without having multiple backups on
different continents, so I have Git remotes. I used to use Gitorious,
and I still have my own server that I push things to, but I wind up
using GitHub a lot of the time. It works decently and isn’t annoying
once you’ve set things up the first time, but I don’t like this
because it’s proprietary&lt;/p&gt;

&lt;h4 id="github-pages"&gt;GitHub Pages&lt;/h4&gt;
&lt;p&gt;If you already have everything in Git and you’ve already given in to
proprietary GitHub software, you might as well use GitHub Pages to
host your website. GitHub Pages serves a website from files committed
to a Git repository.&lt;/p&gt;

&lt;p&gt;Recall that the compiled website goes into the &lt;code&gt;output&lt;/code&gt; directory and
that this directory is a git submodule. I push that submodule to
GitHub, and it gets served through GitHub Pages.&lt;/p&gt;

&lt;p&gt;I must point out that there are some things I don’t like about GitHub
Pages. First, as I said above, it’s proprietary. Second, I can’t serve
different pages depending on the
&lt;a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html"&gt;Accept-Language header&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id="directory-structure"&gt;Directory structure&lt;/h4&gt;
&lt;p&gt;I went with this directory structure for pages.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/!/this-cool-thing/index.html
/!/that-cool-thing/index.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This results in two pages, one at
&lt;code&gt;http://thomaslevine.com/!/this-cool-thing&lt;/code&gt;,
and the other at
&lt;code&gt;http://thomaslevine.com/!/that-cool-thing&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This structure is nice because it gives me a place to put more
than one file per page.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/!/this-cool-thing/index.html
/!/this-cool-thing/picture-of-thing.jpg
/!/that-cool-thing/index.html
/!/that-cool-thing/ugh-microsoft-word.docx
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id="remember-you-might-be-different"&gt;Remember, you might be different&lt;/h3&gt;
&lt;p&gt;I just explained how my site works, but you are probably not a clone
of me. Starting with my ideas might not be a bad idea, but try to come
up with something that suits you better.&lt;/p&gt;

&lt;h2 id="repeat"&gt;Repeat&lt;/h2&gt;
&lt;p&gt;It’s not like each of these steps only happens once.
I still have at least half a lifetime of stuff that I’ve written about, 
photographed, &amp;amp;c. but haven’t published on my website. I periodically
go through those old things and copy them to the site.&lt;/p&gt;

&lt;h2 id="review"&gt;Review&lt;/h2&gt;
&lt;p&gt;Making your personal website might seem daunting, but it’s easy if you
break it into tiny pieces. Start by saving everything. Once you have
a lot of things, organize them and write about them. Don’t worry very
much at first about making the website pretty; just get things started.
And in designing your website, focus on making it easy for you to add
content rather than on making it pleasant for other people to view.&lt;/p&gt;
</content>
  </entry>
</feed>

